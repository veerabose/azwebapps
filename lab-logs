[student@workstation ~]$ lab-configure

 . Enter the GitHub account name: veerabose
   Verifying GitHub account name: veerabose

 . Enter the Quay.io account name: veeraabose
   Verifying Quay.io account name: veeraabose

 . Configuring RHT_OCP4_GITHUB_USER variable: SUCCESS
 . Configuring RHT_OCP4_QUAY_USER variable:   SUCCESS

 . To reconfigure, run: lab-configure -d

 . Ensuring user 'developer' can log in to the OpenShift cluster.
Warning: Permanently added 'utility,172.25.250.253' (ECDSA) to the list of known hosts.
ERROR: Cannot currently log in as user kubeadmin.
[student@workstation ~]$ ^C
[student@workstation ~]$ ^C
[student@workstation ~]$ https://github.com/veerabose/DO180-apps.git
bash: https://github.com/veerabose/DO180-apps.git: No such file or directory
[student@workstation ~]$ git clone https://github.com/veerabose/DO180-apps.git
Cloning into 'DO180-apps'...
remote: Enumerating objects: 172, done.
remote: Total 172 (delta 0), reused 0 (delta 0), pack-reused 172
Receiving objects: 100% (172/172), 287.19 KiB | 480.00 KiB/s, done.
Resolving deltas: 100% (70/70), done.
[student@workstation ~]$ ls
Desktop  DO180-apps  Documents  Downloads  Music  Pictures  Public  Templates  Videos
[student@workstation ~]$ cd DO180-apps/
[student@workstation DO180-apps]$ git status
On branch master
Your branch is up to date with 'origin/master'.

nothing to commit, working tree clean
[student@workstation DO180-apps]$

[student@workstation DO180-apps]$ git checkout -b testbranch
Switched to a new branch testbranch

[student@workstation DO180-apps]$ git add .
[student@workstation DO180-apps]$ git commit -m "DO180"
[testbranch a2978b1] DO180
 1 file changed, 1 insertion(+)
 create mode 100644 TEST
[student@workstation DO180-apps]$ git push --set-upstream origin testbranch
Gtk-Message: 12:09:29.984: Failed to load module "canberra-gtk-module"
Gtk-Message: 12:09:42.026: Failed to load module "canberra-gtk-module"
remote: No anonymous write access.
fatal: Authentication failed for 'https://github.com/veerabose/DO180-apps.git/'
[student@workstation DO180-apps]$ git push --set-upstream origin testbranch
Gtk-Message: 12:10:00.358: Failed to load module "canberra-gtk-module"
Gtk-Message: 12:10:21.575: Failed to load module "canberra-gtk-module"
Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 2 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 285 bytes | 285.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
remote: 
remote: Create a pull request for 'testbranch' on GitHub by visiting:
remote:      https://github.com/veerabose/DO180-apps/pull/new/testbranch
remote: 
To https://github.com/veerabose/DO180-apps.git
 * [new branch]      testbranch -> testbranch
Branch 'testbranch' set up to track remote branch 'testbranch' from 'origin'.
[student@workstation DO180-apps]$ echo "OCP4" > TEST
[student@workstation DO180-apps]$ git add .
[student@workstation DO180-apps]$ git commit -m "OCP4"
[testbranch 00edc58] OCP4
 1 file changed, 1 insertion(+), 1 deletion(-)
[student@workstation DO180-apps]$ git push
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 2 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 274 bytes | 274.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/veerabose/DO180-apps.git
   a2978b1..00edc58  testbranch -> testbranch
[student@workstation DO180-apps]$ 

----------------------
In this chapter, you learned:
• Containers are isolated application runtimes, created with very little overhead.
• A container image packages an application with all of its dependencies, making it easier to run
the application in different environments.
• Applications such as Podman create containers using features of the standard Linux kernel.
• Container image registries are the preferred mechanism for distributing container images to
multiple users and hosts.
• OpenShift orchestrates applications composed of multiple containers using Kubernetes.
• Kubernetes manages load balancing, high availability, and persistent storage for containerized
applications.
• OpenShift adds to Kubernetes multitenancy, security, ease of use, and continuous integration
and continuous development features.
• OpenShift routes enable external access to containerized applications in a manageable way.

---------------------------------------------

[student@workstation DO180-apps]$ lab container-create start

Setting up workstation for the Guided Exercise: Creating a MySQL database instance

 · Checking podman configuration...............................  SUCCESS
 · Creating create_table.txt file..............................  SUCCESS
[student@workstation DO180-apps]$ podman login registry.redhat.io
Username: veeraabose
Password: 
Login Succeeded!
[student@workstation DO180-apps]$

[student@workstation DO180-apps]$ podman run --name mysql-basic -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 -d registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 36bead343ed7 done  
Copying blob e556e33d0b40 done  
Copying blob 1b3417e31a5e done  
Copying blob 809fe483e885 done  
Copying config 82eb01fb3a done  
Writing manifest to image destination
Storing signatures
770f4a2f7d0092db37f1ecbee7346ba52d13eb7ef9429259a2db7f5d83b01e24
[student@workstation DO180-apps]$ podman ps --format "{{.ID}} {{.Image}} {{.Names}}"
770f4a2f7d00 registry.redhat.io/rhel8/mysql-80:1 mysql-basic
[student@workstation DO180-apps]$ podman exec -it mysql-basic /bin/bash
bash-4.4$ mysql -uroot
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.26 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| items              |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.00 sec)

mysql> USE items;
Database changed
mysql> 
mysql> CREATE TABLE Projects (id int NOT NULL,
    -> name varchar(255) DEFAULT NULL,
    -> code varchar(255) DEFAULT NULL,
    -> PRIMARY KEY (id));
Query OK, 0 rows affected (0.06 sec)

mysql> SHOW TABLES;
+-----------------+
| Tables_in_items |
+-----------------+
| Projects        |
+-----------------+
1 row in set (0.00 sec)

mysql> INSERT INTO Projects (id, name, code) VALUES (1,'DevOps','DO180');
Query OK, 1 row affected (0.02 sec)

mysql> SELECT * FROM Projects;
+----+--------+-------+
| id | name   | code  |
+----+--------+-------+
|  1 | DevOps | DO180 |
+----+--------+-------+
1 row in set (0.00 sec)

mysql>
mysql> exit
Bye
bash-4.4$ exit
exit
[student@workstation DO180-apps]$ 

[student@workstation DO180-apps]$ lab container-create finish

Completing the Guided Exercise: Creating a MySQL database instance

 · Removing "mysql-basic" container............................  SUCCESS
 · Removing "registry.redhat.io/rhel8/mysql-80:1" image........  SUCCESS
[student@workstation DO180-apps]$

Summary
-------------------------------------------
In this chapter, you learned:
• Podman allows users to search for and download images from local or remote registries.
• The podman run command creates and starts a container from a container image.
• Containers are executed in the background by using the -d flag, or interactively by using the -
it flag.
• Some container images require environment variables that are set using the -e option with the
podman run command.
• Red Hat Container Catalog assists in searching, exploring, and analyzing container images from
Red Hat's official container image repository.

----------------------------------------------06Oct2022--------------------------------------------

[student@workstation ~]$ lab manage-lifecycle start

Setting up workstation for the Guided Excercise: Managing a MySQL Container

 · Checking podman configuration...............................  SUCCESS
 · Setting up labs folder......................................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials for registry.redhat.io
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman run --name mysql-db registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 36bead343ed7 done  
Copying blob 1b3417e31a5e done  
Copying blob 1770f4614fe5 done  
Copying blob 809fe483e885 done  
Copying config b5b0298033 done  
Writing manifest to image destination
Storing signatures
=> sourcing 20-validate-variables.sh ...
You must either specify the following environment variables:
  MYSQL_USER (regex: '^[a-zA-Z0-9_]+$')
  MYSQL_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
  MYSQL_DATABASE (regex: '^[a-zA-Z0-9_]+$')
Or the following environment variable:
  MYSQL_ROOT_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
Or both.
Optional Settings:
  MYSQL_LOWER_CASE_TABLE_NAMES (default: 0)
  MYSQL_LOG_QUERIES_ENABLED (default: 0)
  MYSQL_MAX_CONNECTIONS (default: 151)
  MYSQL_FT_MIN_WORD_LEN (default: 4)
  MYSQL_FT_MAX_WORD_LEN (default: 20)
  MYSQL_AIO (default: 1)
  MYSQL_KEY_BUFFER_SIZE (default: 32M or 10% of available memory)
  MYSQL_MAX_ALLOWED_PACKET (default: 200M)
  MYSQL_TABLE_OPEN_CACHE (default: 400)
  MYSQL_SORT_BUFFER_SIZE (default: 256K)
  MYSQL_READ_BUFFER_SIZE (default: 8M or 5% of available memory)
  MYSQL_INNODB_BUFFER_POOL_SIZE (default: 32M or 50% of available memory)
  MYSQL_INNODB_LOG_FILE_SIZE (default: 8M or 15% of available memory)
  MYSQL_INNODB_LOG_BUFFER_SIZE (default: 8M or 15% of available memory)

For more information, see https://github.com/sclorg/mysql-container
[student@workstation ~]$ podman ps 
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                     PORTS       NAMES
1004d03199c9  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  50 seconds ago  Exited (1) 51 seconds ago              mysql-db
[student@workstation ~]$ podman logs mysql-db
=> sourcing 20-validate-variables.sh ...
You must either specify the following environment variables:
  MYSQL_USER (regex: '^[a-zA-Z0-9_]+$')
  MYSQL_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
  MYSQL_DATABASE (regex: '^[a-zA-Z0-9_]+$')
Or the following environment variable:
  MYSQL_ROOT_PASSWORD (regex: '^[a-zA-Z0-9_~!@#$%^&*()-=<>,.?;:|]+$')
Or both.
Optional Settings:
  MYSQL_LOWER_CASE_TABLE_NAMES (default: 0)
  MYSQL_LOG_QUERIES_ENABLED (default: 0)
  MYSQL_MAX_CONNECTIONS (default: 151)
  MYSQL_FT_MIN_WORD_LEN (default: 4)
  MYSQL_FT_MAX_WORD_LEN (default: 20)
  MYSQL_AIO (default: 1)
  MYSQL_KEY_BUFFER_SIZE (default: 32M or 10% of available memory)
  MYSQL_MAX_ALLOWED_PACKET (default: 200M)
  MYSQL_TABLE_OPEN_CACHE (default: 400)
  MYSQL_SORT_BUFFER_SIZE (default: 256K)
  MYSQL_READ_BUFFER_SIZE (default: 8M or 5% of available memory)
  MYSQL_INNODB_BUFFER_POOL_SIZE (default: 32M or 50% of available memory)
  MYSQL_INNODB_LOG_FILE_SIZE (default: 8M or 15% of available memory)
  MYSQL_INNODB_LOG_BUFFER_SIZE (default: 8M or 15% of available memory)

For more information, see https://github.com/sclorg/mysql-container
[student@workstation ~]$ podman run --name mysql -d -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55  registry.redhat.io/rhel8/mysql-80:1
2945d6aa479b1190c4bcabfa559059defe11794b398e1899acf9527aed01b0a4
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                    PORTS       NAMES
1004d03199c9  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  8 minutes ago  Exited (1) 8 minutes ago              mysql-db
2945d6aa479b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  6 seconds ago  Up 7 seconds ago                      mysql
[student@workstation ~]$ podman ps 
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS             PORTS       NAMES
2945d6aa479b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  12 seconds ago  Up 12 seconds ago              mysql
[student@workstation ~]$ podman cp ~/DO180/labs/manage-lifecycle/db.sql mysql:/
[student@workstation ~]$ cat DO180/labs/manage-lifecycle/db.sql 
CREATE TABLE `Projects` (id int(11) NOT NULL, `name` varchar(255) DEFAULT NULL, `code` varchar(255) DEFAULT NULL, PRIMARY KEY (id));
insert into `Projects` (`id`, `name`, `code`) values (1,'DevOps','DO180');
[student@workstation ~]$ 
[student@workstation ~]$ podman exec mysql /bin/bash -c 'mysql -uuser1 -pmypa55 items < /db.sql'
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ podman run --name mysql-2 -it registry.redhat.io/rhel8/mysql-80:1 /bin/bash
bash-4.4$ mysql -uroot
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
bash-4.4$ exit
exit
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                         PORTS       NAMES
1004d03199c9  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  16 minutes ago  Exited (1) 16 minutes ago                  mysql-db
2945d6aa479b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  7 minutes ago   Up 7 minutes ago                           mysql
913c1f90aa08  registry.redhat.io/rhel8/mysql-80:1  /bin/bash   3 minutes ago   Exited (1) About a minute ago              mysql-2
[student@workstation ~]$ podman exec mysql /bin/bash -c 'mysql -uuser1 -pmypa55 -e "select * from items.Projects;"'
mysql: [Warning] Using a password on the command line interface can be insecure.
id	name	code
1	DevOps	DO180
[student@workstation ~]$ lab manage-lifecycle finish

Completing the Guided Excercise: Managing a MySQL Container

 · Stopping 'mysql' container..................................  SUCCESS
 · Stopping 'mysql-2' container................................  SUCCESS
 · Removing 'mysql' container..................................  SUCCESS
 · Removing 'mysql-2' container................................  SUCCESS
 · Removing 'mysql-db' container...............................  SUCCESS
 · Removing 'registry.redhat.io/rhel8/mysql-80:1' image........  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ 

--------------------------------------Create MySQL Container with Persistent
Database-------------

[student@workstation ~]$ lab manage-storage start

Setting up workstation for the Guided Exercise: Persisting a MySQL Database

 · Checking podman configuration...............................  SUCCESS
 · Check if the directory used by lab is not created...........  SUCCESS
[student@workstation ~]$ mkdir -vp /home/student/local/mysql
mkdir: created directory '/home/student/local/mysql'
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t '/home/student/local/mysql(/.*)?'
ValueError: File context for /home/student/local/mysql(/.*)? already defined
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ ls -ldZ /home/student/local/mysql
drwxrwxr-x. 2 student student unconfined_u:object_r:container_file_t:s0 6 Oct  6 12:43 /home/student/local/mysql
[student@workstation ~]$ podman unshare chown 27:27 /home/student/local/mysql
[student@workstation ~]$ podman login registry.redhat.io
Username: veeraabose
Password: 
Login Succeeded!
[student@workstation ~]$ podman pull registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 36bead343ed7 done  
Copying blob 809fe483e885 done  
Copying blob 1770f4614fe5 done  
Copying blob 1b3417e31a5e done  
Copying config b5b0298033 done  
Writing manifest to image destination
Storing signatures
b5b0298033611d0c00b66d8664f60997908e9b8ec0e131a5a124783879951bf2
[student@workstation ~]$ podman images
REPOSITORY                         TAG         IMAGE ID      CREATED     SIZE
registry.redhat.io/rhel8/mysql-80  1           b5b029803361  2 days ago  624 MB
[student@workstation ~]$ podman run --name persist-db -d -v /home/student/local/mysql:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
8d709d45239b043b104a4c137de4bdfaf5470ab7c4755cfc73d7073eb841491f
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS            PORTS       NAMES
8d709d45239b  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  8 seconds ago  Up 8 seconds ago              persist-db
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}} {{.Status}}"
8d709d45239b persist-db Up 38 seconds ago
[student@workstation ~]$ ls -ld /home/student/local/mysql/items
drwxr-x---. 2 100026 100026 6 Oct  6 12:49 /home/student/local/mysql/items
[student@workstation ~]$ date
Thu Oct  6 12:50:38 EDT 2022
[student@workstation ~]$ lab manage-storage finish

Completing the Guided Exercise: Persisting a MySQL Database

 · Stopping 'persist-db' container.............................  SUCCESS
 · Removing 'persist-db' container.............................  SUCCESS
 · Removing the 'registry.redhat.io/rhel8/mysql-80:1' image....  SUCCESS
 · Removing the /home/student/local/mysql directory............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS
[student@workstation ~]$ 

----------------------------------------GE--Loading the Database------------------------

[student@workstation ~]$ lab manage-networking start

Setting up workstation for the Guided Exercise: Loading the Database

 · Checking podman configuration...............................  SUCCESS
 · Creating a host directory for the database container:
   · Adding fcontext policy for /home/student/local/mysql......  SUCCESS
   · Creating the /home/student/local/mysql directory..........  SUCCESS
   · Apply fcontext policy to /home/student/local/mysql........  SUCCESS
   · Change owner of the /home/student/local/mysql to the mysql  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials for registry.redhat.io
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman run --name mysqldb-port -d -v /home/student/local/mysql:/var/lib/mysql/data -p 13306:3306 -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 809fe483e885 done  
Copying blob 36bead343ed7 done  
Copying blob 1770f4614fe5 done  
Copying blob 1b3417e31a5e done  
Copying config b5b0298033 done  
Writing manifest to image destination
Storing signatures
3c57290e0e84e99143d43483353dd46fea2837ba7247172fe179ef795bab4bf1
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS             PORTS                    NAMES
3c57290e0e84  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  29 seconds ago  Up 29 seconds ago  0.0.0.0:13306->3306/tcp  mysqldb-port
[student@workstation ~]$ 0.0.0.0:13306->3306/tcp  mysqldb-port
bash: 3306/tcp: No such file or directory
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}} {{.Ports}}"
3c57290e0e84 mysqldb-port 0.0.0.0:13306->3306/tcp
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-networking/db.sql
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ podman exec -it mysqldb-port mysql -uroot items -e "SELECT * FROM Item"
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ cat /home/student/DO180/labs/manage-networking/db.sql 
CREATE TABLE `Item` (`id` BIGINT not null auto_increment primary key, `description` VARCHAR(100), `done` INT);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (1,'Pick up newspaper', 0);
INSERT INTO `Item` (`id`,`description`,`done`) VALUES (2,'Buy groceries', 1);
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ podman exec -it mysqldb-port /bin/bash
bash-4.4$ mysql -uroot items -e "SELECT * FROM Item"
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
bash-4.4$ exit
exit
[student@workstation ~]$ lab manage-networking finish

Completing the Guided Exercise: Loading the Database

 · Stopping the 'mysqldb-port' container.......................  SUCCESS
 · Removing the 'mysqldb-port' container.......................  SUCCESS
 · Removing the 'registry.redhat.io/rhel8/mysql-80:1' image....  SUCCESS
 · Removing the /home/student/local/mysql directory............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS

-------------------------------------------LAB: Managing Containers -----------------------------------------
[student@workstation ~]$ lab manage-review start

Setting up workstation for the Lab: Managing Containers

 · Checking podman configuration...............................  SUCCESS
 · Check that /home/student/local/mysql does not exist.........  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ mkdir -vp /home/student/local/mysql
mkdir: created directory '/home/student/local/mysql'
[student@workstation ~]$ sudo semanage fcontext -a -t container_file_t  '/home/student/local/mysql(/.*)?'
[student@workstation ~]$ sudo restorecon -R /home/student/local/mysql
[student@workstation ~]$ podman unshare chown -Rv 27:27 /home/student/local/mysql
changed ownership of '/home/student/local/mysql' from root:root to 27:27
[student@workstation ~]$ podman login registry.redhat.io
Authenticating with existing credentials for registry.redhat.io
Existing credentials are valid. Already logged in to registry.redhat.io
[student@workstation ~]$ podman run --name mysql-1 -p 13306:3306 -d -v /home/student/local/mysql:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
Trying to pull registry.redhat.io/rhel8/mysql-80:1...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 1b3417e31a5e done  
Copying blob 36bead343ed7 done  
Copying blob 809fe483e885 done  
Copying blob 1770f4614fe5 done  
Copying config b5b0298033 done  
Writing manifest to image destination
Storing signatures
de4c7277c799b456434e155757da10f5d42ccb9e5bff629791edc9da842496a1
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}}"
de4c7277c799 mysql-1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items < /home/student/DO180/labs/manage-review/db.sql
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS            PORTS                    NAMES
de4c7277c799  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  2 minutes ago  Up 2 minutes ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P13306 items -e "SELECT * FROM Item"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
[student@workstation ~]$ podman stop mysql-1
mysql-1
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                COMMAND     CREATED        STATUS                    PORTS                    NAMES
de4c7277c799  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  3 minutes ago  Exited (0) 6 seconds ago  0.0.0.0:13306->3306/tcp  mysql-1
[student@workstation ~]$ podman run --name mysql-2 -p 13306:3306 -d -v /home/student/local/mysql:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1
481659683cd858b8d285dacec55cc132ea6e056d736a997669596862c930a142
[student@workstation ~]$ podman ps --format="{{.ID}} {{.Names}}"
481659683cd8 mysql-2
[student@workstation ~]$ podman ps -a > /tmp/my-containers
[student@workstation ~]$ cat /tmp/my-containers 
CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                    PORTS                    NAMES
de4c7277c799  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  6 minutes ago   Exited (0) 2 minutes ago  0.0.0.0:13306->3306/tcp  mysql-1
481659683cd8  registry.redhat.io/rhel8/mysql-80:1  run-mysqld  40 seconds ago  Up 40 seconds ago         0.0.0.0:13306->3306/tcp  mysql-2
[student@workstation ~]$ podman exec -it mysql-2 /bin/bash
bash-4.4$ mysql -uroot
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.26 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| items              |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.00 sec)

mysql> USE items;
Database changed
mysql> SHOW TABLES;
+-----------------+
| Tables_in_items |
+-----------------+
| Item            |
+-----------------+
1 row in set (0.00 sec)

mysql> SELECT * FROM Item;
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
+----+-------------------+------+
2 rows in set (0.00 sec)

mysql> exit
Bye
bash-4.4$ exit
exit
[student@workstation ~]$ mysql -uuser1 -h workstation.lab.example.com -pmypa55 -P13306 items
mysql: [Warning] Using a password on the command line interface can be insecure.
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 8.0.26 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> INSERT INTO Item (description, done) VALUES ('Finished lab', 1);
Query OK, 1 row affected (0.02 sec)

mysql> SELECT * from Item;
+----+-------------------+------+
| id | description       | done |
+----+-------------------+------+
|  1 | Pick up newspaper |    0 |
|  2 | Buy groceries     |    1 |
|  3 | Finished lab      |    1 |
+----+-------------------+------+
3 rows in set (0.01 sec)

mysql> exit
Bye
[student@workstation ~]$ podman rm mysql-1
de4c7277c799b456434e155757da10f5d42ccb9e5bff629791edc9da842496a1
[student@workstation ~]$ lab manage-review grade

Grading the student's work for the Lab: Managing Containers

 · Checking if the /home/student/local/mysql folder exists.....  PASS
 · Checking if owner was changed...............................  PASS
 · Checking if the container mysql-1 was created...............  PASS
 · Checking if the mysql-2 container is running................  PASS
 · Checking tables for the 'Finished lab' row..................  PASS
[student@workstation ~]$ lab manage-review finish

Completing the Lab: Managing Containers

 · Removing the /home/student/local/mysql folder...............  SUCCESS
 · Removing the fcontext for /home/student/local/mysql.........  SUCCESS
 · Stopping mysql-1 container..................................  SUCCESS
 · Removing mysql-1 container..................................  SUCCESS
 · Stopping mysql-2 container..................................  SUCCESS
 · Removing mysql-2 container..................................  SUCCESS
 · Removing MySQL container image..............................  SUCCESS
 · Removing temporary file.....................................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ 

Summary
-----------
In this chapter, you learned:
• Podman has subcommands to: create a new container (run), delete a container (rm), list
containers (ps), stop a container (stop), and start a process in a container (exec).
• Default container storage is ephemeral, meaning its contents are not present after the container
is removed.
• Containers can use a folder from the host file system to work with persistent data.
• Podman mounts volumes in a container with the -v option in the podman run command.
• The podman exec command starts an additional process inside a running container.
• Podman maps local ports to container ports by using the -p option in the run subcommand.

-----------------------Chapter 4 -----------------------------------------------

[student@workstation ~]$ lab image-operations start

Setting up workstation for the GE: Creating a Custom Apache Container Image

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ podman login quay.io
Username: veeraabose
Password: 
Login Succeeded!
[student@workstation ~]$ podman run -d --name official-httpd -p 8180:80 quay.io/redhattraining/httpd-parent
Trying to pull quay.io/redhattraining/httpd-parent:latest...
Getting image source signatures
Copying blob a3ed95caeb02 done  
Copying blob a3ed95caeb02 done  
Copying blob a3ed95caeb02 done  
Copying blob 787f47dbeaac done  
Copying blob 6a5240d60dc4 done  
Copying blob 08b8c9fdec44 done  
Copying blob a3ed95caeb02 skipped: already exists  
Copying blob a3ed95caeb02 skipped: already exists  
Copying blob a3ed95caeb02 skipped: already exists  
Copying blob 408208567b9a done  
Writing manifest to image destination
Storing signatures
43effcd465811d1388d84ced5f0be49f6d771e13ba624564b16e065865252fb1
[student@workstation ~]$ podman exec -it official-httpd /bin/bash
bash-4.4# cat /var/www/html/index.html 
Hello from the httpd-parent container!
bash-4.4# echo "DO180 Page" > /var/www/html/do180.html
bash-4.4# exit
exit
[student@workstation ~]$ curl 127.0.0.1:8180/do180.html
DO180 Page
[student@workstation ~]$ podman diff official-httpd
C /root
A /root/.bash_history
C /run/httpd
A /run/httpd/cgisock.1
A /run/httpd/httpd.pid
C /tmp
C /var
C /var/log
C /var/log/httpd
A /var/log/httpd/access_log
A /var/log/httpd/error_log
C /var/www
C /var/www/html
A /var/www/html/do180.html
[student@workstation ~]$ podman stop official-httpd
official-httpd
[student@workstation ~]$ podman commit -a 'veera' official-httpd do180-custom-httpd
Getting image source signatures
Copying blob 24d85c895b6b skipped: already exists  
Copying blob c613b100be16 skipped: already exists  
Copying blob 574bcc187eda skipped: already exists  
Copying blob 7f9108fde4a1 skipped: already exists  
Copying blob bad01b4b4478 done  
Copying config 779652b5b0 done  
Writing manifest to image destination
Storing signatures
779652b5b0978db3e5b76df85b864d72cfc3c524cbecbc43de7d3af4f74ffb6d
[student@workstation ~]$ podman images
REPOSITORY                           TAG         IMAGE ID      CREATED         SIZE
localhost/do180-custom-httpd         latest      779652b5b097  43 seconds ago  236 MB
quay.io/redhattraining/httpd-parent  latest      4346d3cace25  3 years ago     236 MB
[student@workstation ~]$ podman ps -a
CONTAINER ID  IMAGE                                       COMMAND               CREATED        STATUS                    PORTS                 NAMES
43effcd46581  quay.io/redhattraining/httpd-parent:latest  /bin/sh -c /usr/s...  6 minutes ago  Exited (0) 2 minutes ago  0.0.0.0:8180->80/tcp  official-httpd
[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$ cat !$
cat /usr/local/etc/ocp4.config
RHT_OCP4_MASTER_API=https://api.ocp4.example.com:6443
RHT_OCP4_WILDCARD_DOMAIN=apps.ocp4.example.com
RHT_OCP4_NEXUS_SERVER=nexus-common.apps.ocp4.example.com
RHT_OCP4_DEV_USER=developer
RHT_OCP4_DEV_PASSWORD=developer
RHT_OCP4_GITHUB_USER=veerabose
RHT_OCP4_QUAY_USER=veeraabose
RHT_OCP4_USER_PASSWD=redhat
[student@workstation ~]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
Error: quay.io/veeraabose/do180-custom-httpd:v1.0: image not known
[student@workstation ~]$ podman tag do180-custom-httpd quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
[student@workstation ~]$ podman images
REPOSITORY                             TAG         IMAGE ID      CREATED        SIZE
localhost/do180-custom-httpd           latest      779652b5b097  5 minutes ago  236 MB
quay.io/veeraabose/do180-custom-httpd  v1.0        779652b5b097  5 minutes ago  236 MB
quay.io/redhattraining/httpd-parent    latest      4346d3cace25  3 years ago    236 MB
[student@workstation ~]$ podman push quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
Getting image source signatures
Copying blob bad01b4b4478 done  
Copying blob 24d85c895b6b skipped: already exists  
Copying blob c613b100be16 skipped: already exists  
Copying blob 574bcc187eda skipped: already exists  
Copying blob 7f9108fde4a1 skipped: already exists  
Copying config 779652b5b0 done  
Writing manifest to image destination
Storing signatures
[student@workstation ~]$ podman pull -q quay.io/${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
779652b5b0978db3e5b76df85b864d72cfc3c524cbecbc43de7d3af4f74ffb6d
[student@workstation ~]$ podman images
REPOSITORY                             TAG         IMAGE ID      CREATED        SIZE
quay.io/veeraabose/do180-custom-httpd  v1.0        779652b5b097  9 minutes ago  236 MB
localhost/do180-custom-httpd           latest      779652b5b097  9 minutes ago  236 MB
quay.io/redhattraining/httpd-parent    latest      4346d3cace25  3 years ago    236 MB
[student@workstation ~]$ podman run -d --name test-httpd -p 8280:80  ${RHT_OCP4_QUAY_USER}/do180-custom-httpd:v1.0
ef3916ac3ff7889fa60b1ceb5f9e290e959006f2ade53372017e79443813da31
[student@workstation ~]$ curl http://localhost:8280/do180.html
DO180 Page
[student@workstation ~]$ lab image-operations finish

Completing the GE: Creating a Custom Apache Container Image

 · Stopping official-httpd container...........................  SUCCESS
 · Removing official-httpd container...........................  SUCCESS
 · Stopping test-httpd container...............................  SUCCESS
 · Removing test-httpd container...............................  SUCCESS
 · Removing redhattraining/httpd-parent image..................  SUCCESS
 · Removing quay.io/veeraabose/do180-custom-httpd image........  SUCCESS
 · Removing localhost/do180-custom-httpd image.................  SUCCESS
[student@workstation ~]$ 


-----------------Ch4 - Lab ----------------------------------------------------------
[student@workstation ~]$ lab image-review start

Setting up workstation for the Lab: Managing Images

 · Checking podman configuration...............................  SUCCESS
[student@workstation ~]$ podman pull quay.io/redhattraining/nginx:1.17
Trying to pull quay.io/redhattraining/nginx:1.17...
Getting image source signatures
Copying blob b00ee4473ca6 skipped: already exists  
Copying blob d1a81ca518e2 skipped: already exists  
Copying blob c78335199707 skipped: already exists  
Copying config 9beeba249f done  
Writing manifest to image destination
Storing signatures
9beeba249f3ee158d3e495a6ac25c5667ae2de8a43ac2a8bfd2bf687a58c06c9
[student@workstation ~]$ podman images
REPOSITORY                    TAG         IMAGE ID      CREATED      SIZE
quay.io/redhattraining/nginx  1.17        9beeba249f3e  2 years ago  131 MB
[student@workstation ~]$ podman run --name official-nginx -d -p 8080:80 quay.io/redhattraining/nginx:1.17
Error: error creating container storage: the container name "official-nginx" is already in use by "38bb58ad3f8734d4fcaac03d5620d7ae567db6fc1f76de378f94f8ce68498dd1". You have to remove that container to be able to reuse that name.: that name is already in use
[student@workstation ~]$ podman rm -f official-nginx 
38bb58ad3f8734d4fcaac03d5620d7ae567db6fc1f76de378f94f8ce68498dd1
[student@workstation ~]$ podman run --name official-nginx -d -p 8080:80 quay.io/redhattraining/nginx:1.17
24acad6eb003f0885651d33b353021d3453e2a6debb034b92f08e29a55264718
[student@workstation ~]$ podman exec -it official-nginx /bin/bash
root@24acad6eb003:/# cat /usr/share/nginx/html/index.html 
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
root@24acad6eb003:/# echo 'DO180' > /usr/share/nginx/html/index.html
root@24acad6eb003:/# cat /usr/share/nginx/html/index.html 
DO180
root@24acad6eb003:/# exit
exit
[student@workstation ~]$ curl 127.0.0.1:8080
DO180
[student@workstation ~]$ podman stop official-nginx
official-nginx
[student@workstation ~]$ podman commit -a 'veera' official-nginx do180/mynginx:v1.0-SNAPSHOT
Getting image source signatures
Copying blob ffc9b21953f4 skipped: already exists  
Copying blob 2f4accd375d9 skipped: already exists  
Copying blob 6c7de695ede3 skipped: already exists  
Copying blob fefe293d37ac done  
Copying config b6710f5af7 done  
Writing manifest to image destination
Storing signatures
b6710f5af796b1d886012872824d28b3e07891dae7c72113d7592a26bb0866b1
[student@workstation ~]$ podman images
REPOSITORY                    TAG            IMAGE ID      CREATED         SIZE
localhost/do180/mynginx       v1.0-SNAPSHOT  b6710f5af796  28 seconds ago  131 MB
quay.io/redhattraining/nginx  1.17           9beeba249f3e  2 years ago     131 MB
[student@workstation ~]$ podman run --name official-nginx-dev -d -p 8080:80 do180/mynginx:v1.0-SNAPSHOT
b1b288b3eeec628bc5ea8155e059380c08b6e6dcfac0e2dc063fde9748e73526
[student@workstation ~]$ podman ps
CONTAINER ID  IMAGE                                  COMMAND               CREATED        STATUS            PORTS                 NAMES
b1b288b3eeec  localhost/do180/mynginx:v1.0-SNAPSHOT  nginx -g daemon o...  7 seconds ago  Up 8 seconds ago  0.0.0.0:8080->80/tcp  official-nginx-dev
[student@workstation ~]$ podman exec -it official-nginx-dev /bin/bash
root@b1b288b3eeec:/# cat /usr/share/nginx/html/index.html 
DO180
root@b1b288b3eeec:/# echo 'DO180 Page' > /usr/share/nginx/html/index.html
root@b1b288b3eeec:/# exit
exit
[student@workstation ~]$ podman stop official-nginx-dev
official-nginx-dev
[student@workstation ~]$ podman commit -a 'veera' official-nginx-dev do180/mynginx:v1.0
Getting image source signatures
Copying blob ffc9b21953f4 skipped: already exists  
Copying blob 2f4accd375d9 skipped: already exists  
Copying blob 6c7de695ede3 skipped: already exists  
Copying blob fefe293d37ac skipped: already exists  
Copying blob aaf4fa91f1ff done  
Copying config 9f4c6deb97 done  
Writing manifest to image destination
Storing signatures
9f4c6deb9792a13f121da1a44a259612d635090fd3835070fdee8a0a1e4588a5
[student@workstation ~]$ podman images
REPOSITORY                    TAG            IMAGE ID      CREATED         SIZE
localhost/do180/mynginx       v1.0           9f4c6deb9792  26 seconds ago  131 MB
localhost/do180/mynginx       v1.0-SNAPSHOT  b6710f5af796  7 minutes ago   131 MB
quay.io/redhattraining/nginx  1.17           9beeba249f3e  2 years ago     131 MB
[student@workstation ~]$ podman ps -a --format="{{.ID}} {{.Names}} {{.Status}}"
24acad6eb003 official-nginx Exited (0) 9 minutes ago
b1b288b3eeec official-nginx-dev Exited (0) About a minute ago
[student@workstation ~]$ podman rm official-nginx-dev
b1b288b3eeec628bc5ea8155e059380c08b6e6dcfac0e2dc063fde9748e73526
[student@workstation ~]$ podman ps -a --format="{{.ID}} {{.Names}} {{.Status}}"
24acad6eb003 official-nginx Exited (0) 9 minutes ago
[student@workstation ~]$ podman rmi do180/mynginx:v1.0-SNAPSHOT
Untagged: localhost/do180/mynginx:v1.0-SNAPSHOT
[student@workstation ~]$ podman images
REPOSITORY                    TAG         IMAGE ID      CREATED        SIZE
localhost/do180/mynginx       v1.0        9f4c6deb9792  2 minutes ago  131 MB
quay.io/redhattraining/nginx  1.17        9beeba249f3e  2 years ago    131 MB
[student@workstation ~]$ podman run -d --name my-nginx -p 8280:80 do180/mynginx:v1.0
66246ea705e0b8cb1f42199ea302f0b8f081c9446b18a4a51195d7c4a2fed8fa
[student@workstation ~]$ curl 127.0.0.1:8280
DO180 Page
[student@workstation ~]$ lab image-review grade

Grading the student's work for the Lab: Managing Images

 · Nginx container image is pulled.............................  PASS
 · Container official-nginx is created.........................  PASS
 · Container official-nginx is stopped.........................  PASS
 · Tag do180/mynginx:v1.0-SNAPSHOT is removed..................  PASS
 · Tag do180/mynginx:v1.0 is created...........................  PASS
 · Container my-nginx is created and running...................  PASS
 · index.html is available with the custom content.............  PASS
[student@workstation ~]$ lab image-review finish

Completing the Lab: Managing Images

 · Stopping official-nginx-dev container.......................  SUCCESS
 · Removing official-nginx-dev container.......................  SUCCESS
 · Stopping official-nginx container...........................  SUCCESS
 · Removing official-nginx container...........................  SUCCESS
 · Removing do180/mynginx:v1.0 image...........................  SUCCESS
 · Removing quay.io/redhattraining/nginx:1.17 image............  SUCCESS
[student@workstation ~]$ 

Summary
In this chapter, you learned:
.• The Red Hat Container Catalog provides tested and certified images at registry.redhat.io.
• Podman can interact with remote container registries to search, pull, and push container images.
• Image tags are a mechanism to support multiple releases of a container image.
• Podman provides commands to manage container images both in local storage and as
compressed files.
• Use the podman commit command to create an image from a container.

-----------------CH5--Guided Exercise--------.Creating a Basic Apache Container Image-------------
[student@workstation ~]$ lab dockerfile-create start

Setting up workstation for the Guided Exercise: Building a basic Apache Container Image

 · Checking podman configuration...............................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ vim ~/DO180/labs/dockerfile-create/Containerfile
[student@workstation ~]$ cat !$
cat ~/DO180/labs/dockerfile-create/Containerfile
FROM ubi8/ubi:8.5
MAINTAINER Your Name veera
LABEL description="A custom Apache container based on UBI 8"
RUN yum install -y httpd && yum clean all
RUN echo "Hello from Containerfile" > /var/www/html/index.html
EXPOSE 80
CMD ["httpd", "-D", "FOREGROUND"]
[student@workstation ~]$ cd ~/DO180/labs/dockerfile-create
[student@workstation dockerfile-create]$ ls
Containerfile
[student@workstation dockerfile-create]$ podman build --layers=false -t do180/apache .
STEP 1/7: FROM ubi8/ubi:8.5
Resolved "ubi8/ubi" as an alias (/etc/containers/registries.conf.d/001-rhel-shortnames.conf)
Trying to pull registry.access.redhat.com/ubi8/ubi:8.5...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 19b323993c37 done  
Copying blob b3c5b1f89131 done  
Copying config 202c1768b1 done  
Writing manifest to image destination
Storing signatures
STEP 2/7: MAINTAINER Your Name veera
STEP 3/7: LABEL description="A custom Apache container based on UBI 8"
STEP 4/7: RUN yum install -y httpd && yum clean all
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

Red Hat Universal Base Image 8 (RPMs) - BaseOS  446 kB/s | 803 kB     00:01    
Red Hat Universal Base Image 8 (RPMs) - AppStre 2.6 MB/s | 3.0 MB     00:01    
Red Hat Universal Base Image 8 (RPMs) - CodeRea  17 kB/s |  20 kB     00:01    
Last metadata expiration check: 0:00:01 ago on Sun Oct  9 17:40:09 2022.
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream  1.4 M
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream   41 k
 httpd-tools          x86_64  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream  108 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-5.module+el8.6.0+13996+01710940    ubi-8-appstream  155 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
Enabling module streams:
 httpd                        2.4                                                             

Transaction Summary
==============================================================================================
Install  10 Packages

Total download size: 2.1 M
Installed size: 5.5 M
Downloading Packages:
(1/10): mailcap-2.1.48-3.el8.noarch.rpm         1.0 MB/s |  39 kB     00:00    
(2/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 660 kB/s |  29 kB     00:00    
(3/10): apr-util-1.6.1-6.el8.x86_64.rpm          11 MB/s | 105 kB     00:00    
(4/10): apr-1.6.3-12.el8.x86_64.rpm             2.7 MB/s | 130 kB     00:00    
(5/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 7.8 MB/s |  27 kB     00:00    
(6/10): mod_http2-1.15.7-5.module+el8.6.0+13996  32 MB/s | 155 kB     00:00    
(7/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     5.2 MB/s |  25 kB     00:00    
(8/10): httpd-tools-2.4.37-47.module+el8.6.0+15  20 MB/s | 108 kB     00:00    
(9/10): httpd-filesystem-2.4.37-47.module+el8.6 8.2 MB/s |  41 kB     00:00    
(10/10): httpd-2.4.37-47.module+el8.6.0+15654+4  92 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            29 MB/s | 2.1 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2    5/10 
  Running scriptlet: httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42    6/10 
  Installing       : httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42    6/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           7/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  8/10 
  Installing       : mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x    9/10 
  Installing       : httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8   10/10 
  Running scriptlet: httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8   10/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  1/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           2/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               3/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   5/10 
  Verifying        : mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x    6/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       7/10 
  Verifying        : httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2    8/10 
  Verifying        : httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8    9/10 
  Verifying        : httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42   10/10 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x86_64                        
  httpd-filesystem-2.4.37-47.module+el8.6.0+15654+427eba2e.2.noarch             
  httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x86_64                  
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x86_64                       
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

25 files removed
STEP 5/7: RUN echo "Hello from Containerfile" > /var/www/html/index.html
STEP 6/7: EXPOSE 80
STEP 7/7: CMD ["httpd", "-D", "FOREGROUND"]
COMMIT do180/apache
Getting image source signatures
Copying blob 3813924f3fa4 skipped: already exists  
Copying blob c86122b5e4d3 skipped: already exists  
Copying blob 230228eebc2e done  
Copying config 7f9154b1b6 done  
Writing manifest to image destination
Storing signatures
--> 7f9154b1b60
Successfully tagged localhost/do180/apache:latest
7f9154b1b6054ce505811b99d68ec36ce6905802a48b04bd2bb44ffcf191d3ab
[student@workstation dockerfile-create]$ podman images
REPOSITORY                           TAG         IMAGE ID      CREATED        SIZE
localhost/do180/apache               latest      7f9154b1b605  6 minutes ago  257 MB
registry.access.redhat.com/ubi8/ubi  8.5         202c1768b1f7  5 months ago   235 MB
[student@workstation dockerfile-create]$ podman run --name lab-apache -d -p 10080:80 do180/apache
f95d2cf65dd46cdb23c3f7b07a237dd8e3d9a071cc7f000cb32522ea5dd69b04
[student@workstation dockerfile-create]$ podman ps
CONTAINER ID  IMAGE                          COMMAND               CREATED         STATUS             PORTS                  NAMES
f95d2cf65dd4  localhost/do180/apache:latest  httpd -D FOREGROU...  17 seconds ago  Up 17 seconds ago  0.0.0.0:10080->80/tcp  lab-apache
[student@workstation dockerfile-create]$ curl -s 127.0.0.1:10080
Hello from Containerfile
[student@workstation dockerfile-create]$ lab dockerfile-create finish

Completing the Guided Exercise: Building a basic Apache Container Image

 · Stopping lab-apache container that is running...............  SUCCESS
 · Removing lab-apache container that is in the cache..........  SUCCESS
 · Removing do180/apache custom container image................  SUCCESS
 · Removing UBI8 container image...............................  SUCCESS
[student@workstation dockerfile-create]$ 

-----------------------------------------------------Lab- Creating Custom Container Images----------
[student@workstation ~]$ lab dockerfile-create start

Setting up workstation for the Guided Exercise: Building a basic Apache Container Image

 · Checking podman configuration...............................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.

[student@workstation ~]$ vim ~/DO180/labs/dockerfile-create/Containerfile
[student@workstation ~]$ cat !$
cat ~/DO180/labs/dockerfile-create/Containerfile
FROM ubi8/ubi:8.5
MAINTAINER Your Name veera
LABEL description="A custom Apache container based on UBI 8"
RUN yum install -y httpd && yum clean all
RUN echo "Hello from Containerfile" > /var/www/html/index.html
EXPOSE 80
CMD ["httpd", "-D", "FOREGROUND"]
[student@workstation ~]$ cd ~/DO180/labs/dockerfile-create
[student@workstation dockerfile-create]$ ls
Containerfile
[student@workstation dockerfile-create]$ podman build --layers=false -t do180/apache .
STEP 1/7: FROM ubi8/ubi:8.5
Resolved "ubi8/ubi" as an alias (/etc/containers/registries.conf.d/001-rhel-shortnames.conf)
Trying to pull registry.access.redhat.com/ubi8/ubi:8.5...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 19b323993c37 done  
Copying blob b3c5b1f89131 done  
Copying config 202c1768b1 done  
Writing manifest to image destination
Storing signatures
STEP 2/7: MAINTAINER Your Name veera
STEP 3/7: LABEL description="A custom Apache container based on UBI 8"
STEP 4/7: RUN yum install -y httpd && yum clean all
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

Red Hat Universal Base Image 8 (RPMs) - BaseOS  446 kB/s | 803 kB     00:01    
Red Hat Universal Base Image 8 (RPMs) - AppStre 2.6 MB/s | 3.0 MB     00:01    
Red Hat Universal Base Image 8 (RPMs) - CodeRea  17 kB/s |  20 kB     00:01    
Last metadata expiration check: 0:00:01 ago on Sun Oct  9 17:40:09 2022.
Dependencies resolved.
==============================================================================================
 Package              Arch    Version                                   Repository        Size
==============================================================================================
Installing:
 httpd                x86_64  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream  1.4 M
Installing dependencies:
 apr                  x86_64  1.6.3-12.el8                              ubi-8-appstream  130 k
 apr-util             x86_64  1.6.1-6.el8                               ubi-8-appstream  105 k
 httpd-filesystem     noarch  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream   41 k
 httpd-tools          x86_64  2.4.37-47.module+el8.6.0+15654+427eba2e.2 ubi-8-appstream  108 k
 mailcap              noarch  2.1.48-3.el8                              ubi-8-baseos      39 k
 mod_http2            x86_64  1.15.7-5.module+el8.6.0+13996+01710940    ubi-8-appstream  155 k
 redhat-logos-httpd   noarch  84.5-1.el8                                ubi-8-baseos      29 k
Installing weak dependencies:
 apr-util-bdb         x86_64  1.6.1-6.el8                               ubi-8-appstream   25 k
 apr-util-openssl     x86_64  1.6.1-6.el8                               ubi-8-appstream   27 k
Enabling module streams:
 httpd                        2.4                                                             

Transaction Summary
==============================================================================================
Install  10 Packages

Total download size: 2.1 M
Installed size: 5.5 M
Downloading Packages:
(1/10): mailcap-2.1.48-3.el8.noarch.rpm         1.0 MB/s |  39 kB     00:00    
(2/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 660 kB/s |  29 kB     00:00    
(3/10): apr-util-1.6.1-6.el8.x86_64.rpm          11 MB/s | 105 kB     00:00    
(4/10): apr-1.6.3-12.el8.x86_64.rpm             2.7 MB/s | 130 kB     00:00    
(5/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 7.8 MB/s |  27 kB     00:00    
(6/10): mod_http2-1.15.7-5.module+el8.6.0+13996  32 MB/s | 155 kB     00:00    
(7/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     5.2 MB/s |  25 kB     00:00    
(8/10): httpd-tools-2.4.37-47.module+el8.6.0+15  20 MB/s | 108 kB     00:00    
(9/10): httpd-filesystem-2.4.37-47.module+el8.6 8.2 MB/s |  41 kB     00:00    
(10/10): httpd-2.4.37-47.module+el8.6.0+15654+4  92 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            29 MB/s | 2.1 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2    5/10 
  Running scriptlet: httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42    6/10 
  Installing       : httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42    6/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           7/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  8/10 
  Installing       : mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x    9/10 
  Installing       : httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8   10/10 
  Running scriptlet: httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8   10/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  1/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                           2/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               3/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   5/10 
  Verifying        : mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x    6/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       7/10 
  Verifying        : httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2    8/10 
  Verifying        : httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x8    9/10 
  Verifying        : httpd-filesystem-2.4.37-47.module+el8.6.0+15654+42   10/10 
Installed products updated.

Installed:
  apr-1.6.3-12.el8.x86_64                                                       
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  httpd-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x86_64                        
  httpd-filesystem-2.4.37-47.module+el8.6.0+15654+427eba2e.2.noarch             
  httpd-tools-2.4.37-47.module+el8.6.0+15654+427eba2e.2.x86_64                  
  mailcap-2.1.48-3.el8.noarch                                                   
  mod_http2-1.15.7-5.module+el8.6.0+13996+01710940.x86_64                       
  redhat-logos-httpd-84.5-1.el8.noarch                                          

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

25 files removed
STEP 5/7: RUN echo "Hello from Containerfile" > /var/www/html/index.html
STEP 6/7: EXPOSE 80
STEP 7/7: CMD ["httpd", "-D", "FOREGROUND"]
COMMIT do180/apache
Getting image source signatures
Copying blob 3813924f3fa4 skipped: already exists  
Copying blob c86122b5e4d3 skipped: already exists  
Copying blob 230228eebc2e done  
Copying config 7f9154b1b6 done  
Writing manifest to image destination
Storing signatures
--> 7f9154b1b60
Successfully tagged localhost/do180/apache:latest
7f9154b1b6054ce505811b99d68ec36ce6905802a48b04bd2bb44ffcf191d3ab
[student@workstation dockerfile-create]$ podman images
REPOSITORY                           TAG         IMAGE ID      CREATED        SIZE
localhost/do180/apache               latest      7f9154b1b605  6 minutes ago  257 MB
registry.access.redhat.com/ubi8/ubi  8.5         202c1768b1f7  5 months ago   235 MB
[student@workstation dockerfile-create]$ podman run --name lab-apache -d -p 10080:80 do180/apache
f95d2cf65dd46cdb23c3f7b07a237dd8e3d9a071cc7f000cb32522ea5dd69b04
[student@workstation dockerfile-create]$ podman ps
CONTAINER ID  IMAGE                          COMMAND               CREATED         STATUS             PORTS                  NAMES
f95d2cf65dd4  localhost/do180/apache:latest  httpd -D FOREGROU...  17 seconds ago  Up 17 seconds ago  0.0.0.0:10080->80/tcp  lab-apache
[student@workstation dockerfile-create]$ curl -s 127.0.0.1:10080
Hello from Containerfile
[student@workstation dockerfile-create]$ lab dockerfile-create finish

Completing the Guided Exercise: Building a basic Apache Container Image

 · Stopping lab-apache container that is running...............  SUCCESS
 · Removing lab-apache container that is in the cache..........  SUCCESS
 · Removing do180/apache custom container image................  SUCCESS
 · Removing UBI8 container image...............................  SUCCESS
[student@workstation dockerfile-create]$ 

--------------------------------------------------CH6 10Oct22---------
GE-Deploying a Database Server on OpenShift
------------------------------------------------------------------------
[student@workstation ~]$ lab openshift-resources start

Setting up workstation for the Guided Exercise: Deploying a Database Server on OpenShift

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'developer-mysql-openshift' project is absent..  SUCCESS
[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$ cat !$
cat /usr/local/etc/ocp4.config
RHT_OCP4_MASTER_API=https://api.ocp4.example.com:6443
RHT_OCP4_WILDCARD_DOMAIN=apps.ocp4.example.com
RHT_OCP4_NEXUS_SERVER=nexus-common.apps.ocp4.example.com
RHT_OCP4_DEV_USER=developer
RHT_OCP4_DEV_PASSWORD=developer
RHT_OCP4_GITHUB_USER=veerabose
RHT_OCP4_QUAY_USER=veeraabose
RHT_OCP4_USER_PASSWD=redhat
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-mysql-openshift
Now using project "developer-mysql-openshift" on server "https://api.ocp4.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname

[student@workstation ~]$ oc et projet
error: unknown command "et" for "oc"

Did you mean this?
	cp
	edit
	get
	set
[student@workstation ~]$ oc get projects
NAME                        DISPLAY NAME   STATUS
developer-mysql-openshift                  Active
[student@workstation ~]$ oc get templates
No resources found in developer-mysql-openshift namespace.
[student@workstation ~]$ oc new-app --template=mysql-persistent -p MYSQL_USER=user1 -p MYSQL_PASSWORD=mypa55 -p MYSQL_DATABASE=testdb -p MYSQL_ROOT_PASSWORD=r00tpa55 -p VOLUME_CAPACITY=10Gi
--> Deploying template "openshift/mysql-persistent" to project developer-mysql-openshift

     MySQL
     ---------
     MySQL database service, with persistent storage. For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.
     
     NOTE: Scaling to more than one replica is not supported. You must have persistent volumes available in your cluster to use this template.

     The following service(s) have been created in your project: mysql.
     
            Username: user1
            Password: mypa55
       Database Name: testdb
      Connection URL: mysql://mysql:3306/
     
     For more information about using this template, including OpenShift considerations, see https://github.com/sclorg/mysql-container/blob/master/8.0/root/usr/share/container-scripts/mysql/README.md.

     * With parameters:
        * Memory Limit=512Mi
        * Namespace=openshift
        * Database Service Name=mysql
        * MySQL Connection Username=user1
        * MySQL Connection Password=mypa55
        * MySQL root user Password=r00tpa55
        * MySQL Database Name=testdb
        * Volume Capacity=10Gi
        * Version of MySQL Image=8.0-el8

--> Creating resources ...
    secret "mysql" created
    service "mysql" created
    persistentvolumeclaim "mysql" created
    deploymentconfig.apps.openshift.io "mysql" created
--> Success
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/mysql' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc status
In project developer-mysql-openshift on server https://api.ocp4.example.com:6443

svc/mysql - 172.30.198.205:3306
  dc/mysql deploys openshift/mysql:8.0-el8 
    deployment #1 running for 34 seconds - 0/1 pods

View details with 'oc describe <resource>/<name>' or list resources with 'oc get all'.
[student@workstation ~]$ oc get all
NAME                 READY   STATUS      RESTARTS   AGE
pod/mysql-1-deploy   0/1     Completed   0          52s
pod/mysql-1-q8vc8    1/1     Running     0          40s

NAME                            DESIRED   CURRENT   READY   AGE
replicationcontroller/mysql-1   1         1         1       52s

NAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
service/mysql   ClusterIP   172.30.198.205   <none>        3306/TCP   54s

NAME                                       REVISION   DESIRED   CURRENT   TRIGGERED BY
deploymentconfig.apps.openshift.io/mysql   1          1         1         config,image(mysql:8.0-el8)
[student@workstation ~]$ oc describe pod pod/mysql-1-deploy
error: there is no need to specify a resource type as a separate argument when passing arguments in resource/name form (e.g. 'oc get resource/<resource_name>' instead of 'oc get resource resource/<resource_name>'
[student@workstation ~]$ oc describe pod/mysql-1-deploy
Name:         mysql-1-deploy
Namespace:    developer-mysql-openshift
Priority:     0
Node:         master01/192.168.50.10
Start Time:   Mon, 10 Oct 2022 01:33:25 -0400
Labels:       openshift.io/deployer-pod-for.name=mysql-1
Annotations:  k8s.v1.cni.cncf.io/network-status:
                [{
                    "name": "openshift-sdn",
                    "interface": "eth0",
                    "ips": [
                        "10.9.0.21"
                    ],
                    "default": true,
                    "dns": {}
                }]
              k8s.v1.cni.cncf.io/networks-status:
                [{
                    "name": "openshift-sdn",
                    "interface": "eth0",
                    "ips": [
                        "10.9.0.21"
                    ],
                    "default": true,
                    "dns": {}
                }]
              openshift.io/deployment-config.name: mysql
              openshift.io/deployment.name: mysql-1
              openshift.io/scc: restricted
Status:       Succeeded
IP:           10.9.0.21
IPs:
  IP:  10.9.0.21
Containers:
  deployment:
    Container ID:   cri-o://f951059b1d946302ce37e68c9bc359101a78196daa45b7a0ae4f7643faa12b81
    Image:          quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9439e3e873a7b9005d08f0afc33b13252c4fe79630496d11cd659ca7327d96f6
    Image ID:       quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9439e3e873a7b9005d08f0afc33b13252c4fe79630496d11cd659ca7327d96f6
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Completed
      Exit Code:    0
      Started:      Mon, 10 Oct 2022 01:33:36 -0400
      Finished:     Mon, 10 Oct 2022 01:34:08 -0400
    Ready:          False
    Restart Count:  0
    Environment:
      OPENSHIFT_DEPLOYMENT_NAME:       mysql-1
      OPENSHIFT_DEPLOYMENT_NAMESPACE:  developer-mysql-openshift
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-b4clm (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  kube-api-access-b4clm:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
    ConfigMapName:           openshift-service-ca.crt
    ConfigMapOptional:       <nil>
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason          Age    From               Message
  ----    ------          ----   ----               -------
  Normal  Scheduled       2m41s  default-scheduler  Successfully assigned developer-mysql-openshift/mysql-1-deploy to master01
  Normal  AddedInterface  2m39s  multus             Add eth0 [10.9.0.21/23] from openshift-sdn
  Normal  Pulling         2m39s  kubelet            Pulling image "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9439e3e873a7b9005d08f0afc33b13252c4fe79630496d11cd659ca7327d96f6"
  Normal  Pulled          2m30s  kubelet            Successfully pulled image "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9439e3e873a7b9005d08f0afc33b13252c4fe79630496d11cd659ca7327d96f6" in 9.426959183s
  Normal  Created         2m30s  kubelet            Created container deployment
  Normal  Started         2m30s  kubelet            Started container deployment
[student@workstation ~]$ oc get svc
NAME    TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
mysql   ClusterIP   172.30.198.205   <none>        3306/TCP   4m17s
[student@workstation ~]$ oc describe service mysql
Name:              mysql
Namespace:         developer-mysql-openshift
Labels:            app=mysql-persistent
                   app.kubernetes.io/component=mysql-persistent
                   app.kubernetes.io/instance=mysql-persistent
                   template=mysql-persistent-template
Annotations:       openshift.io/generated-by: OpenShiftNewApp
                   template.openshift.io/expose-uri: mysql://{.spec.clusterIP}:{.spec.ports[?(.name=="mysql")].port}
Selector:          name=mysql
Type:              ClusterIP
IP Family Policy:  SingleStack
IP Families:       IPv4
IP:                172.30.198.205
IPs:               172.30.198.205
Port:              mysql  3306/TCP
TargetPort:        3306/TCP
Endpoints:         10.9.0.22:3306
Session Affinity:  None
Events:            <none>
[student@workstation ~]$ oc get pvc
NAME    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
mysql   Bound    pvc-922bdda2-59d4-4bd5-9cb2-7bd61205d195   10Gi       RWO            nfs-storage    6m41s
[student@workstation ~]$ oc get pv
Error from server (Forbidden): persistentvolumes is forbidden: User "developer" cannot list resource "persistentvolumes" in API group "" at the cluster scope
[student@workstation ~]$ oc port-forward mysql-1-5vfn4 3306:3306
Error from server (NotFound): pods "mysql-1-5vfn4" not found
[student@workstation ~]$ oc get pod
NAME             READY   STATUS      RESTARTS   AGE
mysql-1-deploy   0/1     Completed   0          8m5s
mysql-1-q8vc8    1/1     Running     0          7m53s
[student@workstation ~]$ oc port-forward mysql-1-q8vc8 3306:3306
Forwarding from 127.0.0.1:3306 -> 3306
Forwarding from [::1]:3306 -> 3306

^C[student@workstation ~]$ oc port-forward mysql-1-q8vc8 3306:3306
Forwarding from 127.0.0.1:3306 -> 3306
Forwarding from [::1]:3306 -> 3306
Handling connection for 3306
^C[student@workstation ~]$ oc delete project ${RHT_OCP4_DEV_USER}-mysql-openshift
project.project.openshift.io "developer-mysql-openshift" deleted
[student@workstation ~]$ lab openshift-resources finish

Completing the Guided Exercise: Deploying a Database Server on OpenShift

 · Deleting the 'developer-mysql-openshift' project............  SUCCESS
[student@workstation ~]$ 

------------------------------------------------------GE-Exposing a Service as a Route-CH6--------------
[student@workstation ~]$ ls
Desktop  DO180  DO180-apps  Documents  Downloads  local  Music  Pictures  Public  Templates  Videos
[student@workstation ~]$ lab openshift-routes start

Setting up workstation for the Guided Exercise: Exposing a Service as a Route

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'developer-route' project does not exist.......  SUCCESS
[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$ cat !$
cat /usr/local/etc/ocp4.config
RHT_OCP4_MASTER_API=https://api.ocp4.example.com:6443
RHT_OCP4_WILDCARD_DOMAIN=apps.ocp4.example.com
RHT_OCP4_NEXUS_SERVER=nexus-common.apps.ocp4.example.com
RHT_OCP4_DEV_USER=developer
RHT_OCP4_DEV_PASSWORD=developer
RHT_OCP4_GITHUB_USER=veerabose
RHT_OCP4_QUAY_USER=veeraabose
RHT_OCP4_USER_PASSWD=redhat
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-route
Now using project "developer-route" on server "https://api.ocp4.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname

[student@workstation ~]$ oc new-app --image=quay.io/redhattraining/php-hello-dockerfile --name php-helloworld
--> Found container image 4b696cc (3 years old) from quay.io for "quay.io/redhattraining/php-hello-dockerfile"

    Red Hat Universal Base Image 8 
    ------------------------------ 
    The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.

    Tags: base rhel8

    * An image stream tag will be created as "php-helloworld:latest" that will track this image

--> Creating resources ...
    imagestream.image.openshift.io "php-helloworld" created
    deployment.apps "php-helloworld" created
    service "php-helloworld" created
--> Success
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/php-helloworld' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc get pods -w
NAME                              READY   STATUS    RESTARTS   AGE
php-helloworld-85484585d6-thnjf   1/1     Running   0          2m52s
^C[student@workstation ~]$ oc logs -f php-helloworld-85484585d6-thnjf
[10-Oct-2022 17:07:03] NOTICE: [pool www] 'user' directive is ignored when FPM is not running as root
[10-Oct-2022 17:07:03] NOTICE: [pool www] 'group' directive is ignored when FPM is not running as root
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.9.0.17. Set the 'ServerName' directive globally to suppress this message
^C
[student@workstation ~]$ oc describe svc/php-helloworld
Name:              php-helloworld
Namespace:         developer-route
Labels:            app=php-helloworld
                   app.kubernetes.io/component=php-helloworld
                   app.kubernetes.io/instance=php-helloworld
Annotations:       openshift.io/generated-by: OpenShiftNewApp
Selector:          deployment=php-helloworld
Type:              ClusterIP
IP Family Policy:  SingleStack
IP Families:       IPv4
IP:                172.30.158.72
IPs:               172.30.158.72
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.9.0.17:8080
Session Affinity:  None
Events:            <none>
[student@workstation ~]$ oc expose svc/php-helloworld
route.route.openshift.io/php-helloworld exposed
[student@workstation ~]$ oc describe route
Name:			php-helloworld
Namespace:		developer-route
Created:		17 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		php-helloworld-developer-route.apps.ocp4.example.com
			   exposed on router default (host router-default.apps.ocp4.example.com) 17 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.9.0.17:8080
[student@workstation ~]$ curl php-helloworld-${RHT_OCP4_DEV_USER}-route.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ curl php-helloworld-developer-route.apps.ocp4.example.com
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ oc delete route/php-helloworld
route.route.openshift.io "php-helloworld" deleted
[student@workstation ~]$ oc expose svc/php-helloworld --name=${RHT_OCP4_DEV_USER}-xyz
route.route.openshift.io/developer-xyz exposed
[student@workstation ~]$ curl route.route.openshift.io/developer-xyz
curl: (6) Could not resolve host: route.route.openshift.io
[student@workstation ~]$ oc describe route
Name:			developer-xyz
Namespace:		developer-route
Created:		25 seconds ago
Labels:			app=php-helloworld
			app.kubernetes.io/component=php-helloworld
			app.kubernetes.io/instance=php-helloworld
Annotations:		openshift.io/host.generated=true
Requested Host:		developer-xyz-developer-route.apps.ocp4.example.com
			   exposed on router default (host router-default.apps.ocp4.example.com) 25 seconds ago
Path:			<none>
TLS Termination:	<none>
Insecure Policy:	<none>
Endpoint Port:		8080-tcp

Service:	php-helloworld
Weight:		100 (100%)
Endpoints:	10.9.0.17:8080
[student@workstation ~]$ curl developer-xyz-developer-route.apps.ocp4.example.com
Hello, World! PHP version is 7.2.11
[student@workstation ~]$ lab openshift-routes finish

Completing the Guided Exercise: Exposing a Service as a Route

 · Removing OpenShift project 'developer-route'................  SUCCESS
[student@workstation ~]$ 

--------------------------------GE--Creating a Containerized Application with Source-to-Image-CH6-----------------------
 [student@workstation ~]$ lab openshift-s2i start

Setting up workstation for the Guided Excercise: Creating a Containerized Application with Source-to-Image

 · Installing the tree command.................................  SUCCESS
 Checking local clone of the applications repository:
 · Folder '/home/student/DO180-apps' is a git repo.............  SUCCESS
 · Git repo '/home/student/DO180-apps' has no pending changes..  SUCCESS
 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'developer-s2i' project does not exist.........  SUCCESS
[student@workstation ~]$ cd ~/DO180-apps
[student@workstation DO180-apps]$ git checkout master
Switched to branch 'master'
Your branch is up to date with 'origin/master'.
[student@workstation DO180-apps]$ git checkout -b s2i
Switched to a new branch 's2i'
[student@workstation DO180-apps]$ git push -u origin s2i
Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
remote: 
remote: Create a pull request for 's2i' on GitHub by visiting:
remote:      https://github.com/veerabose/DO180-apps/pull/new/s2i
remote: 
To https://github.com/veerabose/DO180-apps.git
 * [new branch]      s2i -> s2i
Branch 's2i' set up to track remote branch 's2i' from 'origin'.
[student@workstation DO180-apps]$ cd php-helloworld/
[student@workstation php-helloworld]$ ls
index.php
[student@workstation php-helloworld]$ cat index.php 
<?php
print "Hello, World! php version is " . PHP_VERSION . "\n";
?>
[student@workstation php-helloworld]$ source /usr/local/etc/ocp4.config
[student@workstation php-helloworld]$ cd ..
[student@workstation DO180-apps]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation DO180-apps]$ oc new-project ${RHT_OCP4_DEV_USER}-s2i
Now using project "developer-s2i" on server "https://api.ocp4.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname

[student@workstation DO180-apps]$ oc new-app php:7.3 --name=php-helloworld https://github.com/${RHT_OCP4_GITHUB_USER}/DO180-apps#s2i --context-dir php-helloworld
--> Found image 0d7c8b9 (3 months old) in image stream "openshift/php" under tag "7.3" for "php:7.3"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, rh-php73

    * The source repository appears to match: php
    * A source build using source code from https://github.com/veerabose/DO180-apps#s2i will be created
      * The resulting image will be pushed to image stream tag "php-helloworld:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "php-helloworld" created
    buildconfig.build.openshift.io "php-helloworld" created
    deployment.apps "php-helloworld" created
    service "php-helloworld" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/php-helloworld' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/php-helloworld' 
    Run 'oc status' to view your app.
[student@workstation DO180-apps]$ oc logs -f buildconfig/php-helloworld
Adding cluster TLS certificate authority to trust store
Cloning "https://github.com/veerabose/DO180-apps" ...
	Commit:	180da897d2146855cd58eef0bdb6483d3b880f97 (Delete labs)
	Author:	veerabose <34031941+veerabose@users.noreply.github.com>
	Date:	Wed Apr 28 17:20:06 2021 +0530
Adding cluster TLS certificate authority to trust store
Adding cluster TLS certificate authority to trust store
time="2022-10-11T17:15:22Z" level=info msg="Not using native diff for overlay, this may cause degraded performance for building images: kernel has CONFIG_OVERLAY_FS_REDIRECT_DIR enabled"
I1011 17:15:22.054366       1 defaults.go:102] Defaulting to storage driver "overlay" with options [mountopt=metacopy=on].
Caching blobs under "/var/cache/blobs".
Trying to pull image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510...
Getting image source signatures
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying config sha256:0d7c8b9be5d6986eddaba0f2e3c338594c64f75903ced01930661e5c9271d78a
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
Adding transient rw bind mount for /run/secrets/rhsm
STEP 1/9: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
STEP 2/9: LABEL "io.openshift.build.commit.date"="Wed Apr 28 17:20:06 2021 +0530"       "io.openshift.build.commit.id"="180da897d2146855cd58eef0bdb6483d3b880f97"       "io.openshift.build.commit.ref"="s2i"       "io.openshift.build.commit.message"="Delete labs"       "io.openshift.build.source-location"="https://github.com/veerabose/DO180-apps"       "io.openshift.build.source-context-dir"="php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510"       "io.openshift.build.commit.author"="veerabose <34031941+veerabose@users.noreply.github.com>"
STEP 3/9: ENV OPENSHIFT_BUILD_NAME="php-helloworld-1"     OPENSHIFT_BUILD_NAMESPACE="developer-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/veerabose/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="s2i"     OPENSHIFT_BUILD_COMMIT="180da897d2146855cd58eef0bdb6483d3b880f97"
STEP 4/9: USER root
STEP 5/9: COPY upload/src /tmp/src
STEP 6/9: RUN chown -R 1001:0 /tmp/src
STEP 7/9: USER 1001
STEP 8/9: RUN /usr/libexec/s2i/assemble
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 17:15:41     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9/9: CMD /usr/libexec/s2i/run
COMMIT temp.builder.openshift.io/developer-s2i/php-helloworld-1:5dd5119d
time="2022-10-11T17:15:41Z" level=warning msg="Adding metacopy option, configured globally"
Getting image source signatures
Copying blob sha256:63c0270243d0ab5c36d4b250fbb9a7cee6e03e2391dcff38a405ad8553a6fe05
Copying blob sha256:cbd5a225fe2d34dfab50eecfbd5bb1b99eefdbfe3903fc2afaab24b79b60ffe2
Copying blob sha256:aba55b1131ca8729f8f118e018866d271512ccd5cfb03acbc7e33e9b4ab76411
Copying blob sha256:1c027f3e4a1adeb5a3b7346a48471ba8e2091a0eb6363c4ff6f97561f5d38607
Copying blob sha256:2907061238ee4021d20835d15e9b334891ee600f01466d31256bcce3c9262315
Copying blob sha256:18f1850e5e0d1fb529032d8c40e9b70da4312dc4e5e0bb15065912f929034cff
Copying config sha256:9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Writing manifest to image destination
Storing signatures
--> 9f46cfa130d
Successfully tagged temp.builder.openshift.io/developer-s2i/php-helloworld-1:5dd5119d
9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Getting image source signatures

Pushing image image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld:latest ...
Copying blob sha256:18f1850e5e0d1fb529032d8c40e9b70da4312dc4e5e0bb15065912f929034cff
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying config sha256:9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld@sha256:d8293426fc5590fc465a8aeeabb8f85e5484437144dafc74222d45d79b1cf451
Push successful
[student@workstation DO180-apps]$ oc status
In project developer-s2i on server https://api.ocp4.example.com:6443

svc/php-helloworld - 172.30.228.110 ports 8080, 8443
  deployment/php-helloworld deploys istag/php-helloworld:latest <-
    bc/php-helloworld source builds https://github.com/veerabose/DO180-apps#s2i on openshift/php:7.3 
    deployment #2 running for about a minute - 1 pod
    deployment #1 deployed 2 minutes ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation DO180-apps]$ oc get all
NAME                                  READY   STATUS      RESTARTS   AGE
pod/php-helloworld-1-build            0/1     Completed   0          2m46s
pod/php-helloworld-54f8754498-54m7k   1/1     Running     0          119s

NAME                     TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/php-helloworld   ClusterIP   172.30.228.110   <none>        8080/TCP,8443/TCP   2m46s

NAME                             READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/php-helloworld   1/1     1            1           2m46s

NAME                                        DESIRED   CURRENT   READY   AGE
replicaset.apps/php-helloworld-54f8754498   1         1         1       119s
replicaset.apps/php-helloworld-767c6c8b8d   0         0         0       2m46s

NAME                                            TYPE     FROM      LATEST
buildconfig.build.openshift.io/php-helloworld   Source   Git@s2i   1

NAME                                        TYPE     FROM          STATUS     STARTED         DURATION
build.build.openshift.io/php-helloworld-1   Source   Git@180da89   Complete   2 minutes ago   48s

NAME                                            IMAGE REPOSITORY                                                                TAGS     UPDATED
imagestream.image.openshift.io/php-helloworld   image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld   latest   2 minutes ago
[student@workstation DO180-apps]$ oc get pods
NAME                              READY   STATUS      RESTARTS   AGE
php-helloworld-1-build            0/1     Completed   0          4m51s
php-helloworld-54f8754498-54m7k   1/1     Running     0          4m4s
[student@workstation DO180-apps]$ oc logs --all-containers -f php-helloworld-1-build
Adding cluster TLS certificate authority to trust store
Adding cluster TLS certificate authority to trust store
Cloning "https://github.com/veerabose/DO180-apps" ...
	Commit:	180da897d2146855cd58eef0bdb6483d3b880f97 (Delete labs)
	Author:	veerabose <34031941+veerabose@users.noreply.github.com>
	Date:	Wed Apr 28 17:20:06 2021 +0530
Adding cluster TLS certificate authority to trust store
time="2022-10-11T17:15:22Z" level=info msg="Not using native diff for overlay, this may cause degraded performance for building images: kernel has CONFIG_OVERLAY_FS_REDIRECT_DIR enabled"
I1011 17:15:22.054366       1 defaults.go:102] Defaulting to storage driver "overlay" with options [mountopt=metacopy=on].
Caching blobs under "/var/cache/blobs".
Trying to pull image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510...
Getting image source signatures
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying config sha256:0d7c8b9be5d6986eddaba0f2e3c338594c64f75903ced01930661e5c9271d78a
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
Adding transient rw bind mount for /run/secrets/rhsm
STEP 1/9: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
STEP 2/9: LABEL "io.openshift.build.commit.date"="Wed Apr 28 17:20:06 2021 +0530"       "io.openshift.build.commit.id"="180da897d2146855cd58eef0bdb6483d3b880f97"       "io.openshift.build.commit.ref"="s2i"       "io.openshift.build.commit.message"="Delete labs"       "io.openshift.build.source-location"="https://github.com/veerabose/DO180-apps"       "io.openshift.build.source-context-dir"="php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510"       "io.openshift.build.commit.author"="veerabose <34031941+veerabose@users.noreply.github.com>"
STEP 3/9: ENV OPENSHIFT_BUILD_NAME="php-helloworld-1"     OPENSHIFT_BUILD_NAMESPACE="developer-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/veerabose/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="s2i"     OPENSHIFT_BUILD_COMMIT="180da897d2146855cd58eef0bdb6483d3b880f97"
STEP 4/9: USER root
STEP 5/9: COPY upload/src /tmp/src
STEP 6/9: RUN chown -R 1001:0 /tmp/src
STEP 7/9: USER 1001
STEP 8/9: RUN /usr/libexec/s2i/assemble
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 17:15:41     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9/9: CMD /usr/libexec/s2i/run
COMMIT temp.builder.openshift.io/developer-s2i/php-helloworld-1:5dd5119d
time="2022-10-11T17:15:41Z" level=warning msg="Adding metacopy option, configured globally"
Getting image source signatures
Copying blob sha256:63c0270243d0ab5c36d4b250fbb9a7cee6e03e2391dcff38a405ad8553a6fe05
Copying blob sha256:cbd5a225fe2d34dfab50eecfbd5bb1b99eefdbfe3903fc2afaab24b79b60ffe2
Copying blob sha256:aba55b1131ca8729f8f118e018866d271512ccd5cfb03acbc7e33e9b4ab76411
Copying blob sha256:1c027f3e4a1adeb5a3b7346a48471ba8e2091a0eb6363c4ff6f97561f5d38607
Copying blob sha256:2907061238ee4021d20835d15e9b334891ee600f01466d31256bcce3c9262315
Copying blob sha256:18f1850e5e0d1fb529032d8c40e9b70da4312dc4e5e0bb15065912f929034cff
Copying config sha256:9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Writing manifest to image destination
Storing signatures
--> 9f46cfa130d
Successfully tagged temp.builder.openshift.io/developer-s2i/php-helloworld-1:5dd5119d
9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Getting image source signatures

Pushing image image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld:latest ...
Copying blob sha256:18f1850e5e0d1fb529032d8c40e9b70da4312dc4e5e0bb15065912f929034cff
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying config sha256:9f46cfa130db1dc52cde5c9fddbfaae6612c8e6edc50dca9be3cef661b8532a4
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld@sha256:d8293426fc5590fc465a8aeeabb8f85e5484437144dafc74222d45d79b1cf451
Push successful
[student@workstation DO180-apps]$ oc describe deployment/php-helloworld
Name:                   php-helloworld
Namespace:              developer-s2i
CreationTimestamp:      Tue, 11 Oct 2022 13:14:57 -0400
Labels:                 app=php-helloworld
                        app.kubernetes.io/component=php-helloworld
                        app.kubernetes.io/instance=php-helloworld
Annotations:            deployment.kubernetes.io/revision: 2
                        image.openshift.io/triggers:
                          [{"from":{"kind":"ImageStreamTag","name":"php-helloworld:latest"},"fieldPath":"spec.template.spec.containers[?(@.name==\"php-helloworld\")...
                        openshift.io/generated-by: OpenShiftNewApp
Selector:               deployment=php-helloworld
Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:       deployment=php-helloworld
  Annotations:  openshift.io/generated-by: OpenShiftNewApp
  Containers:
   php-helloworld:
    Image:        image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld@sha256:d8293426fc5590fc465a8aeeabb8f85e5484437144dafc74222d45d79b1cf451
    Ports:        8443/TCP, 8080/TCP
    Host Ports:   0/TCP, 0/TCP
    Environment:  <none>
    Mounts:       <none>
  Volumes:        <none>
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  <none>
NewReplicaSet:   php-helloworld-54f8754498 (1/1 replicas created)
Events:
  Type    Reason             Age    From                   Message
  ----    ------             ----   ----                   -------
  Normal  ScalingReplicaSet  6m37s  deployment-controller  Scaled up replica set php-helloworld-767c6c8b8d to 1
  Normal  ScalingReplicaSet  5m50s  deployment-controller  Scaled up replica set php-helloworld-54f8754498 to 1
  Normal  ScalingReplicaSet  5m35s  deployment-controller  Scaled down replica set php-helloworld-767c6c8b8d to 0
[student@workstation DO180-apps]$ oc get svc
NAME             TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
php-helloworld   ClusterIP   172.30.228.110   <none>        8080/TCP,8443/TCP   9m41s
[student@workstation DO180-apps]$ oc expose service php-helloworld --name ${RHT_OCP4_DEV_USER}-helloworld
route.route.openshift.io/developer-helloworld exposed
[student@workstation DO180-apps]$ oc get route -o jsonpath='{..spec.host}{"\n"}'
developer-helloworld-developer-s2i.apps.ocp4.example.com
[student@workstation DO180-apps]$ curl -s developer-helloworld-developer-s2i.apps.ocp4.example.com
Hello, World! php version is 7.3.33
[student@workstation DO180-apps]$ curl -s ${RHT_OCP4_DEV_USER}-helloworld-${RHT_OCP4_DEV_USER}-s2i.${RHT_OCP4_WILDCARD_DOMAIN}
Hello, World! php version is 7.3.33
[student@workstation DO180-apps]$ cd ~/DO180-apps/php-helloworld
[student@workstation php-helloworld]$ vi index.php 
[student@workstation php-helloworld]$ git status
On branch s2i
Your branch is up to date with 'origin/s2i'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   index.php

no changes added to commit (use "git add" and/or "git commit -a")
[student@workstation php-helloworld]$ git add .
[student@workstation php-helloworld]$ git commit -m 'Changed index page contents.'
[s2i 50aacb8] Changed index page contents.
 1 file changed, 1 insertion(+)
[student@workstation php-helloworld]$ git push origin s2i
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (4/4), 419 bytes | 419.00 KiB/s, done.
Total 4 (delta 1), reused 3 (delta 1), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/veerabose/DO180-apps.git
   180da89..50aacb8  s2i -> s2i
[student@workstation php-helloworld]$ oc start-build php-helloworld
build.build.openshift.io/php-helloworld-2 started
[student@workstation php-helloworld]$ oc get pods
NAME                              READY   STATUS      RESTARTS   AGE
php-helloworld-1-build            0/1     Completed   0          18m
php-helloworld-2-build            1/1     Running     0          14s
php-helloworld-54f8754498-54m7k   1/1     Running     0          17m
[student@workstation php-helloworld]$ oc get pods
NAME                              READY   STATUS      RESTARTS   AGE
php-helloworld-1-build            0/1     Completed   0          19m
php-helloworld-2-build            0/1     Completed   0          86s
php-helloworld-56bcd46bd4-fgxlm   1/1     Running     0          61s
[student@workstation php-helloworld]$ oc logs php-helloworld-2-build -f
Adding cluster TLS certificate authority to trust store
time="2022-10-11T17:33:32Z" level=info msg="Not using native diff for overlay, this may cause degraded performance for building images: kernel has CONFIG_OVERLAY_FS_REDIRECT_DIR enabled"
I1011 17:33:32.108313       1 defaults.go:102] Defaulting to storage driver "overlay" with options [mountopt=metacopy=on].
Caching blobs under "/var/cache/blobs".
Trying to pull image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510...
Getting image source signatures
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying config sha256:0d7c8b9be5d6986eddaba0f2e3c338594c64f75903ced01930661e5c9271d78a
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
Adding transient rw bind mount for /run/secrets/rhsm
STEP 1/9: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
STEP 2/9: LABEL "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510"       "io.openshift.build.commit.author"="Student User <student@workstation.lab.example.com>"       "io.openshift.build.commit.date"="Tue Oct 11 13:28:56 2022 -0400"       "io.openshift.build.commit.id"="50aacb8ec673ba812736bb7d8ca486c8ce62a0a0"       "io.openshift.build.commit.ref"="s2i"       "io.openshift.build.commit.message"="Changed index page contents."       "io.openshift.build.source-location"="https://github.com/veerabose/DO180-apps"       "io.openshift.build.source-context-dir"="php-helloworld"
STEP 3/9: ENV OPENSHIFT_BUILD_NAME="php-helloworld-2"     OPENSHIFT_BUILD_NAMESPACE="developer-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/veerabose/DO180-apps"     OPENSHIFT_BUILD_REFERENCE="s2i"     OPENSHIFT_BUILD_COMMIT="50aacb8ec673ba812736bb7d8ca486c8ce62a0a0"
STEP 4/9: USER root
STEP 5/9: COPY upload/src /tmp/src
STEP 6/9: RUN chown -R 1001:0 /tmp/src
STEP 7/9: USER 1001
STEP 8/9: RUN /usr/libexec/s2i/assemble
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 17:33:47     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9/9: CMD /usr/libexec/s2i/run
COMMIT temp.builder.openshift.io/developer-s2i/php-helloworld-2:10370f97
time="2022-10-11T17:33:47Z" level=warning msg="Adding metacopy option, configured globally"
Getting image source signatures
Copying blob sha256:63c0270243d0ab5c36d4b250fbb9a7cee6e03e2391dcff38a405ad8553a6fe05
Copying blob sha256:cbd5a225fe2d34dfab50eecfbd5bb1b99eefdbfe3903fc2afaab24b79b60ffe2
Copying blob sha256:aba55b1131ca8729f8f118e018866d271512ccd5cfb03acbc7e33e9b4ab76411
Copying blob sha256:1c027f3e4a1adeb5a3b7346a48471ba8e2091a0eb6363c4ff6f97561f5d38607
Copying blob sha256:2907061238ee4021d20835d15e9b334891ee600f01466d31256bcce3c9262315
Copying blob sha256:f50350ae5c1bafb1641fb5165eef4e2520977b1eb1646e56ea71f49c34fcdf49
Copying config sha256:29c1b612f0451e64d2c725e05eb7a60c85aaf52f1c084c7885eff31afe07ed5d
Writing manifest to image destination
Storing signatures
--> 29c1b612f04
Successfully tagged temp.builder.openshift.io/developer-s2i/php-helloworld-2:10370f97
29c1b612f0451e64d2c725e05eb7a60c85aaf52f1c084c7885eff31afe07ed5d

Pushing image image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld:latest ...
Getting image source signatures
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:f50350ae5c1bafb1641fb5165eef4e2520977b1eb1646e56ea71f49c34fcdf49
Copying config sha256:29c1b612f0451e64d2c725e05eb7a60c85aaf52f1c084c7885eff31afe07ed5d
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/developer-s2i/php-helloworld@sha256:01e0cce6a534233a68a591a297e14b2618922b4ad0e64dc0f9fce70fd63a5894
Push successful
[student@workstation php-helloworld]$ oc get pods
NAME                              READY   STATUS      RESTARTS   AGE
php-helloworld-1-build            0/1     Completed   0          22m
php-helloworld-2-build            0/1     Completed   0          3m34s
php-helloworld-56bcd46bd4-fgxlm   1/1     Running     0          3m9s
[student@workstation php-helloworld]$ curl -s developer-helloworld-developer-s2i.apps.ocp4.example.com
Hello, World! php version is 7.3.33
A change is a coming!
[student@workstation php-helloworld]$ lab openshift-s2i finish

Completing the Guided Excercise: Creating a Containerized Application with Source-to-Image

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the 'developer-s2i' project........................  SUCCESS
[student@workstation php-helloworld]$ 

 --------------LAB 06 Deploying Containerized Applications on OpenShift----------
 [student@workstation ~]$ lab openshift-review start

Setting up workstation for the Lab: Deploying Containerized Applications on OpenShift

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensuring the 'developer-ocp' project does not exist.........  SUCCESS

[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-ocp
Now using project "developer-ocp" on server "https://api.ocp4.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname

[student@workstation ~]$ oc new-app php:7.3~https://github.com/RedHatTraining/DO180-apps --context-dir temps --name temps
--> Found image 0d7c8b9 (3 months old) in image stream "openshift/php" under tag "7.3" for "php:7.3"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, rh-php73

    * A source build using source code from https://github.com/RedHatTraining/DO180-apps will be created
      * The resulting image will be pushed to image stream tag "temps:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "temps" created
    buildconfig.build.openshift.io "temps" created
    deployment.apps "temps" created
    service "temps" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/temps' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/temps' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc logs -f bc/temps
Adding cluster TLS certificate authority to trust store
Cloning "https://github.com/RedHatTraining/DO180-apps" ...
	Commit:	f7cd8963ef353d9173c3a21dcccf402f3616840b (Initial commit, including all apps previously in course)
	Author:	Jordi Sola <someth2say@gmail.com>
	Date:	Fri Oct 4 13:04:03 2019 +0200
Adding cluster TLS certificate authority to trust store
Adding cluster TLS certificate authority to trust store
time="2022-10-11T17:47:06Z" level=info msg="Not using native diff for overlay, this may cause degraded performance for building images: kernel has CONFIG_OVERLAY_FS_REDIRECT_DIR enabled"
I1011 17:47:06.579323       1 defaults.go:102] Defaulting to storage driver "overlay" with options [mountopt=metacopy=on].
Caching blobs under "/var/cache/blobs".
Trying to pull image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510...
Getting image source signatures
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying config sha256:0d7c8b9be5d6986eddaba0f2e3c338594c64f75903ced01930661e5c9271d78a
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
Adding transient rw bind mount for /run/secrets/rhsm
STEP 1/9: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510
STEP 2/9: LABEL "io.openshift.build.commit.author"="Jordi Sola <someth2say@gmail.com>"       "io.openshift.build.commit.date"="Fri Oct 4 13:04:03 2019 +0200"       "io.openshift.build.commit.id"="f7cd8963ef353d9173c3a21dcccf402f3616840b"       "io.openshift.build.commit.ref"="master"       "io.openshift.build.commit.message"="Initial commit, including all apps previously in course"       "io.openshift.build.source-location"="https://github.com/RedHatTraining/DO180-apps"       "io.openshift.build.source-context-dir"="temps"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:8a55f47ae8a635e5dab3cbd63b404137ae25fc2aa5357abd1c3adfd355ebc510"
STEP 3/9: ENV OPENSHIFT_BUILD_NAME="temps-1"     OPENSHIFT_BUILD_NAMESPACE="developer-ocp"     OPENSHIFT_BUILD_SOURCE="https://github.com/RedHatTraining/DO180-apps"     OPENSHIFT_BUILD_COMMIT="f7cd8963ef353d9173c3a21dcccf402f3616840b"
STEP 4/9: USER root
STEP 5/9: COPY upload/src /tmp/src
STEP 6/9: RUN chown -R 1001:0 /tmp/src
STEP 7/9: USER 1001
STEP 8/9: RUN /usr/libexec/s2i/assemble
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 17:47:20     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9/9: CMD /usr/libexec/s2i/run
COMMIT temp.builder.openshift.io/developer-ocp/temps-1:cdd577ec
time="2022-10-11T17:47:20Z" level=warning msg="Adding metacopy option, configured globally"
Getting image source signatures
Copying blob sha256:63c0270243d0ab5c36d4b250fbb9a7cee6e03e2391dcff38a405ad8553a6fe05
Copying blob sha256:cbd5a225fe2d34dfab50eecfbd5bb1b99eefdbfe3903fc2afaab24b79b60ffe2
Copying blob sha256:aba55b1131ca8729f8f118e018866d271512ccd5cfb03acbc7e33e9b4ab76411
Copying blob sha256:1c027f3e4a1adeb5a3b7346a48471ba8e2091a0eb6363c4ff6f97561f5d38607
Copying blob sha256:2907061238ee4021d20835d15e9b334891ee600f01466d31256bcce3c9262315
Copying blob sha256:4bd6e2eabb42ca6beb3c19d1f040faa9da2d5026ee668b19dcfe0a2e7ab62c0e
Copying config sha256:f20c0dcc4cde069b020b4cbfeb938572aa2611e473eb759923485049c9a8bf5a
Writing manifest to image destination
Storing signatures
--> f20c0dcc4cd
Successfully tagged temp.builder.openshift.io/developer-ocp/temps-1:cdd577ec
f20c0dcc4cde069b020b4cbfeb938572aa2611e473eb759923485049c9a8bf5a

Pushing image image-registry.openshift-image-registry.svc:5000/developer-ocp/temps:latest ...
Getting image source signatures
Copying blob sha256:4bd6e2eabb42ca6beb3c19d1f040faa9da2d5026ee668b19dcfe0a2e7ab62c0e
Copying blob sha256:b8b9f4fbfc2dbc0a5c14a11cd3ee717cd2fb9c8b58499863ca111c9356af84d4
Copying blob sha256:f6029bef86708a073e687c7ececb22245ee3cc2bff1dd9108e98e19469ac3c0f
Copying blob sha256:6b5d6793adb89f3531e554d5066a6f7c5518cb9c8958f4c139713cbd7bacf30b
Copying blob sha256:1cc60fbe16bd8c6d9af0ca63602331cb25bd68705ae0160dbaae1de6ac5457d3
Copying blob sha256:ffb0ffdba2a920e44896cc35806092f88cef747e2bb92cffc9538507dd9f5238
Copying config sha256:f20c0dcc4cde069b020b4cbfeb938572aa2611e473eb759923485049c9a8bf5a
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/developer-ocp/temps@sha256:961adb6b9758a47292931421e985cfc1ae72869e15ead96d28ba4fc3927a8f6f
Push successful
[student@workstation ~]$ oc get pods -w
NAME                     READY   STATUS      RESTARTS   AGE
temps-1-build            0/1     Completed   0          110s
temps-785df57c66-j96qx   1/1     Running     0          81s
^C[student@workstation ~]$ oc status
In project developer-ocp on server https://api.ocp4.example.com:6443

svc/temps - 172.30.155.116 ports 8080, 8443
  deployment/temps deploys istag/temps:latest <-
    bc/temps source builds https://github.com/RedHatTraining/DO180-apps on openshift/php:7.3 
    deployment #2 running for about a minute - 1 pod
    deployment #1 deployed 2 minutes ago


1 info identified, use 'oc status --suggest' to see details.
[student@workstation ~]$ oc get all
NAME                         READY   STATUS      RESTARTS   AGE
pod/temps-1-build            0/1     Completed   0          2m22s
pod/temps-785df57c66-j96qx   1/1     Running     0          113s

NAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/temps   ClusterIP   172.30.155.116   <none>        8080/TCP,8443/TCP   2m23s

NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/temps   1/1     1            1           2m23s

NAME                               DESIRED   CURRENT   READY   AGE
replicaset.apps/temps-564dbdbbbb   0         0         0       2m23s
replicaset.apps/temps-785df57c66   1         1         1       113s

NAME                                   TYPE     FROM   LATEST
buildconfig.build.openshift.io/temps   Source   Git    1

NAME                               TYPE     FROM          STATUS     STARTED         DURATION
build.build.openshift.io/temps-1   Source   Git@f7cd896   Complete   2 minutes ago   29s

NAME                                   IMAGE REPOSITORY                                                       TAGS     UPDATED
imagestream.image.openshift.io/temps   image-registry.openshift-image-registry.svc:5000/developer-ocp/temps   latest   About a minute ago
[student@workstation ~]$ oc expose svc/temps
route.route.openshift.io/temps exposed
[student@workstation ~]$ oc get route/temps
NAME    HOST/PORT                                   PATH   SERVICES   PORT       TERMINATION   WILDCARD
temps   temps-developer-ocp.apps.ocp4.example.com          temps      8080-tcp                 None
[student@workstation ~]$ lab openshift-review grade

Grading the student's work for the Lab: Deploying Containerized Applications on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
Accessing the web application..................................  PASS
[student@workstation ~]$ lab openshift-review finish

Completing the Lab: Deploying Containerized Applications on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
 · Deleting the developer-ocp project..........................  SUCCESS
[student@workstation ~]$ 

------------------------------------------------Summary---------------------------
In this chapter, you learned:

• OpenShift Container Platform stores definitions of each OpenShift or Kubernetes resource
instance as an object in the cluster's distributed database service, etcd. Common resource
types are: Pod, Persistent Volume (PV), Persistent Volume Claim (PVC), Service
(SVC), Route, Deployment, DeploymentConfig and Build Configuration (BC).
• Use the OpenShift command-line client oc to:
– Create, change, and delete projects.
– Create application resources inside a project.
– Delete, inspect, edit, and export resources inside a project.
– Check logs from application pods, deployments, and build operations.
• The oc new-app command can create application pods in many different ways: from an
existing container image hosted on an image registry, from Containerfiles, and from source code
using the Source-to-Image (S2I) process.
• Source-to-Image (S2I) is a tool that makes it easy to build a container image from application
source code. This tool retrieves source code from a Git repository, injects the source code into
a selected container image based on a specific language or technology, and produces a new
container image that runs the assembled application.
• A Route connects a public-facing IP address and DNS host name to an internal-facing service
IP. While services allow for network access between pods inside an OpenShift instance, routes
allow for network access to pods from users and applications outside the OpenShift instance.
• You can create, build, deploy, and monitor applications using the OpenShift web console.

----------------------------CH7 - Deploying Multi-Container Applications-------12OCt22------------------
----------------------------------------------
[student@workstation ~]$ lab multicontainer-application start

Setting up workstation for the Guided Exercise: Creating an Application on OpenShift

 · Checking podman configuration...............................  SUCCESS

 Verifying the OpenShift cluster is running:
 · Log in on OpenShift.........................................  SUCCESS
 · Check the internal registry is up and running...............  SUCCESS
 · Ensure application project does not exist...................  SUCCESS
 · Downloading starter project.................................  SUCCESS
 · Downloading solution project................................  SUCCESS

Setup successful. Please proceed with the exercise.


[student@workstation ~]$ source /usr/local/etc/ocp4.config
[student@workstation ~]$ oc login -u ${RHT_OCP4_DEV_USER} -p ${RHT_OCP4_DEV_PASSWORD} ${RHT_OCP4_MASTER_API}
Login successful.

You don't have any projects. You can try to create a new project, by running

    oc new-project <projectname>

[student@workstation ~]$ oc new-project ${RHT_OCP4_DEV_USER}-application
Now using project "developer-application" on server "https://api.ocp4.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/e2e-test-images/agnhost:2.33 -- /agnhost serve-hostname

[student@workstation ~]$ oc get projects
NAME                    DISPLAY NAME   STATUS
developer-application                  Active
[student@workstation ~]$ pwd
/home/student
[student@workstation ~]$ cd DO180-apps/
[student@workstation DO180-apps]$ cd ..
[student@workstation ~]$ cd DO180
[student@workstation DO180]$ cd labs/multicontainer-application/
[student@workstation multicontainer-application]$ ls
db.sql  todo-app.yml
[student@workstation multicontainer-application]$ less todo-app.yml 
[student@workstation multicontainer-application]$ oc get sc
NAME                    PROVISIONER                                   RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
nfs-storage (default)   k8s-sigs.io/nfs-subdir-external-provisioner   Delete          Immediate           false                  75d
[student@workstation multicontainer-application]$ oc get sc -o ymal | less
[student@workstation multicontainer-application]$ oc get sc -o yaml | less
[student@workstation multicontainer-application]$ oc get sc -o yaml 
apiVersion: v1
items:
- apiVersion: storage.k8s.io/v1
  kind: StorageClass
  metadata:
    annotations:
      storageclass.kubernetes.io/is-default-class: "true"
    creationTimestamp: "2022-07-28T16:27:24Z"
    name: nfs-storage
    resourceVersion: "22949"
    uid: d34dc63c-af3f-45a6-b90d-06efdd5aa823
  parameters:
    archiveOnDelete: "false"
  provisioner: k8s-sigs.io/nfs-subdir-external-provisioner
  reclaimPolicy: Delete
  volumeBindingMode: Immediate
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
[student@workstation multicontainer-application]$ oc get pvc
No resources found in developer-application namespace.
[student@workstation multicontainer-application]$ oc create -f todo-app.yml
pod/mysql created
pod/todoapi created
service/todoapi created
service/mysql created
persistentvolumeclaim/dbclaim created
[student@workstation multicontainer-application]$ oc get app
error: the server doesn't have a resource type "app"
[student@workstation multicontainer-application]$ oc get all
NAME          READY   STATUS    RESTARTS   AGE
pod/mysql     1/1     Running   0          43s
pod/todoapi   1/1     Running   0          43s

NAME              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)     AGE
service/mysql     ClusterIP   172.30.66.189   <none>        3306/TCP    43s
service/todoapi   ClusterIP   172.30.39.114   <none>        30080/TCP   43s
[student@workstation multicontainer-application]$ cat todo-app.yml 
apiVersion: v1
items:
- apiVersion: v1
  kind: Pod
  metadata:
    labels:
      app: todonodejs
      name: mysql
    name: mysql
  spec:
    containers:
    - env:
      - name: MYSQL_ROOT_PASSWORD
        value: r00tpa55
      - name: MYSQL_USER
        value: user1
      - name: MYSQL_PASSWORD
        value: mypa55
      - name: MYSQL_DATABASE
        value: items
      image: registry.redhat.io/rhel8/mysql-80:1
      name: mysql
      ports:
      - containerPort: 3306
        name: mysql
      volumeMounts:
      - mountPath: /var/lib/mysql/data
        name: db-volume
    volumes:
    - name: db-volume
      persistentVolumeClaim:
        claimName: dbclaim

- apiVersion: v1
  kind: Pod
  metadata:
    labels:
      app: todonodejs
      name: todoapi
    name: todoapi
  spec:
    containers:
    - env:
      - name: MYSQL_ENV_MYSQL_DATABASE
        value: items
      - name: MYSQL_ENV_MYSQL_USER
        value: user1
      - name: MYSQL_ENV_MYSQL_PASSWORD
        value: mypa55
      image: quay.io/redhattraining/do180-todonodejs-12
      name: todoapi
      ports:
      - containerPort: 30080
        name: nodejs-http
      resources:
        limits:
          cpu: "0.5"
- apiVersion: v1
  kind: Service
  metadata:
    labels:
      app: todonodejs
      name: todoapi
    name: todoapi
  spec:
    ports:
    - port: 30080
    selector:
      name: todoapi
- apiVersion: v1
  kind: Service
  metadata:
    labels:
      app: todonodejs
      name: mysql
    name: mysql
  spec:
    ports:
    - port: 3306
    selector:
      name: mysql
- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    labels:
      app: todonodejs
    name: dbclaim
  spec:
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 10Mi
kind: List
metadata: {}
[student@workstation multicontainer-application]$ oc get pvc
NAME      STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
dbclaim   Bound    pvc-5eedb2d4-2442-451f-aab0-0bb344878363   10Mi       RWO            nfs-storage    79s
[student@workstation multicontainer-application]$ oc get pods -w
NAME      READY   STATUS    RESTARTS   AGE
mysql     1/1     Running   0          110s
todoapi   1/1     Running   0          110s
^C[student@workstation multicontainer-application]$ oc port-forward mysql 3306:3306
Forwarding from 127.0.0.1:3306 -> 3306
Forwarding from [::1]:3306 -> 3306
Handling connection for 3306
^C[student@workstation multicontainer-application]$ 
[student@workstation multicontainer-application]$ mysql -uuser1 -h 127.0.0.1 -pmypa55 -P3306 items < db.sql
mysql: [Warning] Using a password on the command line interface can be insecure.
[student@workstation multicontainer-application]$ 

[student@workstation ~]$ oc expose service todoapi
route.route.openshift.io/todoapi exposed
[student@workstation ~]$ oc status | grep -o "http:.*com"
http://todoapi-developer-application.apps.ocp4.example.com
[student@workstation ~]$ curl -w "\n" $(oc status | grep -o "http:.*com")/todo/api/items/1
{"id":1,"description":"Pick up newspaper","done":false}
[student@workstation ~]$ cd ~
[student@workstation ~]$ lab multicontainer-application finish

Completing the Guided Exercise: Creating an Application on OpenShift

 · Log in on OpenShift.........................................  SUCCESS
 · Removing developer-application project......................  SUCCESS
 · Removing the project directory..............................  SUCCESS
 · Removing the solution directory.............................  SUCCESS
[student@workstation ~]$ 
------------------------------------------------LAB -Deploying Multi-Container Applications ------------------



